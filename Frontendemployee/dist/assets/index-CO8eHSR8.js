var ks=Object.defineProperty;var Rs=(t,r,n)=>r in t?ks(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;var Yn=(t,r,n)=>Rs(t,typeof r!="symbol"?r+"":r,n);import{aq as Ts,ag as _i,aE as Os,aF as br,aG as xr,aH as Ls,aI as Us,W as ue,aJ as ti,s as ie,t as ce,S as Gn,aK as Cs,aL as Ns,aM as qs,aN as zs,aO as Fs,aP as Ds,D as Ks,aQ as Ae,aR as un,aS as bn,aT as le,aU as Ps,aV as Er,aW as Zs,aX as ki,aY as Vs,a0 as $s,aZ as nt,B as js,J as Ys,p as Gs,a_ as Hn,n as Hs,_ as ve,o as Ws,q as Xs,r as Js,u as Qs}from"./index-B53wgWLC.js";import{a as to,h as eo,s as no}from"./hmac-DBzZ4NEP.js";import{s as ei}from"./sha256-CSJmR5El.js";import{c as ro,a as io,b as Ne}from"./solanaRpcMiddlewares-DNZmbbmx.js";var rn={exports:{}},so=rn.exports,ni;function Ri(){return ni||(ni=1,(function(t){(function(r,n){function e(h,i){if(!h)throw new Error(i||"Assertion failed")}function c(h,i){h.super_=i;var u=function(){};u.prototype=i.prototype,h.prototype=new u,h.prototype.constructor=h}function o(h,i,u){if(o.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((i==="le"||i==="be")&&(u=i,i=10),this._init(h||0,i||10,u||"be"))}typeof r=="object"?r.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=Ts.Buffer}catch{}o.isBN=function(i){return i instanceof o?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===o.wordSize&&Array.isArray(i.words)},o.max=function(i,u){return i.cmp(u)>0?i:u},o.min=function(i,u){return i.cmp(u)<0?i:u},o.prototype._init=function(i,u,l){if(typeof i=="number")return this._initNumber(i,u,l);if(typeof i=="object")return this._initArray(i,u,l);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),i=i.toString().replace(/\s+/g,"");var g=0;i[0]==="-"&&(g++,this.negative=1),g<i.length&&(u===16?this._parseHex(i,g,l):(this._parseBase(i,u,g),l==="le"&&this._initArray(this.toArray(),u,l)))},o.prototype._initNumber=function(i,u,l){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(e(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},o.prototype._initArray=function(i,u,l){if(e(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m,v,E=0;if(l==="be")for(g=i.length-1,m=0;g>=0;g-=3)v=i[g]|i[g-1]<<8|i[g-2]<<16,this.words[m]|=v<<E&67108863,this.words[m+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);else if(l==="le")for(g=0,m=0;g<i.length;g+=3)v=i[g]|i[g+1]<<8|i[g+2]<<16,this.words[m]|=v<<E&67108863,this.words[m+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);return this._strip()};function b(h,i){var u=h.charCodeAt(i);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+h)}function p(h,i,u){var l=b(h,u);return u-1>=i&&(l|=b(h,u-1)<<4),l}o.prototype._parseHex=function(i,u,l){this.length=Math.ceil((i.length-u)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m=0,v=0,E;if(l==="be")for(g=i.length-1;g>=u;g-=2)E=p(i,u,g)<<m,this.words[v]|=E&67108863,m>=18?(m-=18,v+=1,this.words[v]|=E>>>26):m+=8;else{var y=i.length-u;for(g=y%2===0?u+1:u;g<i.length;g+=2)E=p(i,u,g)<<m,this.words[v]|=E&67108863,m>=18?(m-=18,v+=1,this.words[v]|=E>>>26):m+=8}this._strip()};function M(h,i,u,l){for(var g=0,m=0,v=Math.min(h.length,u),E=i;E<v;E++){var y=h.charCodeAt(E)-48;g*=l,y>=49?m=y-49+10:y>=17?m=y-17+10:m=y,e(y>=0&&m<l,"Invalid character"),g+=m}return g}o.prototype._parseBase=function(i,u,l){this.words=[0],this.length=1;for(var g=0,m=1;m<=67108863;m*=u)g++;g--,m=m/u|0;for(var v=i.length-l,E=v%g,y=Math.min(v,v-E)+l,s=0,a=l;a<y;a+=g)s=M(i,a,a+g,u),this.imuln(m),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(E!==0){var d=1;for(s=M(i,a,i.length,u),a=0;a<E;a++)d*=u;this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},o.prototype.copy=function(i){i.words=new Array(this.length);for(var u=0;u<this.length;u++)i.words[u]=this.words[u];i.length=this.length,i.negative=this.negative,i.red=this.red};function _(h,i){h.words=i.words,h.length=i.length,h.negative=i.negative,h.red=i.red}if(o.prototype._move=function(i){_(i,this)},o.prototype.clone=function(){var i=new o(null);return this.copy(i),i},o.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=C}catch{o.prototype.inspect=C}else o.prototype.inspect=C;function C(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],U=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(i,u){i=i||10,u=u|0||1;var l;if(i===16||i==="hex"){l="";for(var g=0,m=0,v=0;v<this.length;v++){var E=this.words[v],y=((E<<g|m)&16777215).toString(16);m=E>>>24-g&16777215,g+=2,g>=26&&(g-=26,v--),m!==0||v!==this.length-1?l=A[6-y.length]+y+l:l=y+l}for(m!==0&&(l=m.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(i===(i|0)&&i>=2&&i<=36){var s=k[i],a=U[i];l="";var d=this.clone();for(d.negative=0;!d.isZero();){var w=d.modrn(a).toString(i);d=d.idivn(a),d.isZero()?l=w+l:l=A[s-w.length]+w+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}e(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},o.prototype.toJSON=function(){return this.toString(16,2)},f&&(o.prototype.toBuffer=function(i,u){return this.toArrayLike(f,i,u)}),o.prototype.toArray=function(i,u){return this.toArrayLike(Array,i,u)};var F=function(i,u){return i.allocUnsafe?i.allocUnsafe(u):new i(u)};o.prototype.toArrayLike=function(i,u,l){this._strip();var g=this.byteLength(),m=l||Math.max(1,g);e(g<=m,"byte array longer than desired length"),e(m>0,"Requested array length <= 0");var v=F(i,m),E=u==="le"?"LE":"BE";return this["_toArrayLike"+E](v,g),v},o.prototype._toArrayLikeLE=function(i,u){for(var l=0,g=0,m=0,v=0;m<this.length;m++){var E=this.words[m]<<v|g;i[l++]=E&255,l<i.length&&(i[l++]=E>>8&255),l<i.length&&(i[l++]=E>>16&255),v===6?(l<i.length&&(i[l++]=E>>24&255),g=0,v=0):(g=E>>>24,v+=2)}if(l<i.length)for(i[l++]=g;l<i.length;)i[l++]=0},o.prototype._toArrayLikeBE=function(i,u){for(var l=i.length-1,g=0,m=0,v=0;m<this.length;m++){var E=this.words[m]<<v|g;i[l--]=E&255,l>=0&&(i[l--]=E>>8&255),l>=0&&(i[l--]=E>>16&255),v===6?(l>=0&&(i[l--]=E>>24&255),g=0,v=0):(g=E>>>24,v+=2)}if(l>=0)for(i[l--]=g;l>=0;)i[l--]=0},Math.clz32?o.prototype._countBits=function(i){return 32-Math.clz32(i)}:o.prototype._countBits=function(i){var u=i,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},o.prototype._zeroBits=function(i){if(i===0)return 26;var u=i,l=0;return(u&8191)===0&&(l+=13,u>>>=13),(u&127)===0&&(l+=7,u>>>=7),(u&15)===0&&(l+=4,u>>>=4),(u&3)===0&&(l+=2,u>>>=2),(u&1)===0&&l++,l},o.prototype.bitLength=function(){var i=this.words[this.length-1],u=this._countBits(i);return(this.length-1)*26+u};function N(h){for(var i=new Array(h.bitLength()),u=0;u<i.length;u++){var l=u/26|0,g=u%26;i[u]=h.words[l]>>>g&1}return i}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(i+=l,l!==26)break}return i},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},o.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var u=0;u<i.length;u++)this.words[u]=this.words[u]|i.words[u];return this._strip()},o.prototype.ior=function(i){return e((this.negative|i.negative)===0),this.iuor(i)},o.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},o.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},o.prototype.iuand=function(i){var u;this.length>i.length?u=i:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&i.words[l];return this.length=u.length,this._strip()},o.prototype.iand=function(i){return e((this.negative|i.negative)===0),this.iuand(i)},o.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},o.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},o.prototype.iuxor=function(i){var u,l;this.length>i.length?(u=this,l=i):(u=i,l=this);for(var g=0;g<l.length;g++)this.words[g]=u.words[g]^l.words[g];if(this!==u)for(;g<u.length;g++)this.words[g]=u.words[g];return this.length=u.length,this._strip()},o.prototype.ixor=function(i){return e((this.negative|i.negative)===0),this.iuxor(i)},o.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},o.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},o.prototype.inotn=function(i){e(typeof i=="number"&&i>=0);var u=Math.ceil(i/26)|0,l=i%26;this._expand(u),l>0&&u--;for(var g=0;g<u;g++)this.words[g]=~this.words[g]&67108863;return l>0&&(this.words[g]=~this.words[g]&67108863>>26-l),this._strip()},o.prototype.notn=function(i){return this.clone().inotn(i)},o.prototype.setn=function(i,u){e(typeof i=="number"&&i>=0);var l=i/26|0,g=i%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<g:this.words[l]=this.words[l]&~(1<<g),this._strip()},o.prototype.iadd=function(i){var u;if(this.negative!==0&&i.negative===0)return this.negative=0,u=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,u=this.isub(i),i.negative=1,u._normSign();var l,g;this.length>i.length?(l=this,g=i):(l=i,g=this);for(var m=0,v=0;v<g.length;v++)u=(l.words[v]|0)+(g.words[v]|0)+m,this.words[v]=u&67108863,m=u>>>26;for(;m!==0&&v<l.length;v++)u=(l.words[v]|0)+m,this.words[v]=u&67108863,m=u>>>26;if(this.length=l.length,m!==0)this.words[this.length]=m,this.length++;else if(l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this},o.prototype.add=function(i){var u;return i.negative!==0&&this.negative===0?(i.negative=0,u=this.sub(i),i.negative^=1,u):i.negative===0&&this.negative!==0?(this.negative=0,u=i.sub(this),this.negative=1,u):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},o.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var u=this.iadd(i);return i.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var l=this.cmp(i);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,m;l>0?(g=this,m=i):(g=i,m=this);for(var v=0,E=0;E<m.length;E++)u=(g.words[E]|0)-(m.words[E]|0)+v,v=u>>26,this.words[E]=u&67108863;for(;v!==0&&E<g.length;E++)u=(g.words[E]|0)+v,v=u>>26,this.words[E]=u&67108863;if(v===0&&E<g.length&&g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this.length=Math.max(this.length,E),g!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(i){return this.clone().isub(i)};function z(h,i,u){u.negative=i.negative^h.negative;var l=h.length+i.length|0;u.length=l,l=l-1|0;var g=h.words[0]|0,m=i.words[0]|0,v=g*m,E=v&67108863,y=v/67108864|0;u.words[0]=E;for(var s=1;s<l;s++){for(var a=y>>>26,d=y&67108863,w=Math.min(s,i.length-1),I=Math.max(0,s-h.length+1);I<=w;I++){var q=s-I|0;g=h.words[q]|0,m=i.words[I]|0,v=g*m+d,a+=v/67108864|0,d=v&67108863}u.words[s]=d|0,y=a|0}return y!==0?u.words[s]=y|0:u.length--,u._strip()}var P=function(i,u,l){var g=i.words,m=u.words,v=l.words,E=0,y,s,a,d=g[0]|0,w=d&8191,I=d>>>13,q=g[1]|0,V=q&8191,Y=q>>>13,it=g[2]|0,st=it&8191,at=it>>>13,Ve=g[3]|0,ht=Ve&8191,dt=Ve>>>13,zr=g[4]|0,pt=zr&8191,gt=zr>>>13,Fr=g[5]|0,yt=Fr&8191,mt=Fr>>>13,Dr=g[6]|0,wt=Dr&8191,vt=Dr>>>13,Kr=g[7]|0,bt=Kr&8191,xt=Kr>>>13,Pr=g[8]|0,Et=Pr&8191,Mt=Pr>>>13,Zr=g[9]|0,St=Zr&8191,Bt=Zr>>>13,Vr=m[0]|0,At=Vr&8191,It=Vr>>>13,$r=m[1]|0,_t=$r&8191,kt=$r>>>13,jr=m[2]|0,Rt=jr&8191,Tt=jr>>>13,Yr=m[3]|0,Ot=Yr&8191,Lt=Yr>>>13,Gr=m[4]|0,Ut=Gr&8191,Ct=Gr>>>13,Hr=m[5]|0,Nt=Hr&8191,qt=Hr>>>13,Wr=m[6]|0,zt=Wr&8191,Ft=Wr>>>13,Xr=m[7]|0,Dt=Xr&8191,Kt=Xr>>>13,Jr=m[8]|0,Pt=Jr&8191,Zt=Jr>>>13,Qr=m[9]|0,Vt=Qr&8191,$t=Qr>>>13;l.negative=i.negative^u.negative,l.length=19,y=Math.imul(w,At),s=Math.imul(w,It),s=s+Math.imul(I,At)|0,a=Math.imul(I,It);var _n=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(_n>>>26)|0,_n&=67108863,y=Math.imul(V,At),s=Math.imul(V,It),s=s+Math.imul(Y,At)|0,a=Math.imul(Y,It),y=y+Math.imul(w,_t)|0,s=s+Math.imul(w,kt)|0,s=s+Math.imul(I,_t)|0,a=a+Math.imul(I,kt)|0;var kn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(kn>>>26)|0,kn&=67108863,y=Math.imul(st,At),s=Math.imul(st,It),s=s+Math.imul(at,At)|0,a=Math.imul(at,It),y=y+Math.imul(V,_t)|0,s=s+Math.imul(V,kt)|0,s=s+Math.imul(Y,_t)|0,a=a+Math.imul(Y,kt)|0,y=y+Math.imul(w,Rt)|0,s=s+Math.imul(w,Tt)|0,s=s+Math.imul(I,Rt)|0,a=a+Math.imul(I,Tt)|0;var Rn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,y=Math.imul(ht,At),s=Math.imul(ht,It),s=s+Math.imul(dt,At)|0,a=Math.imul(dt,It),y=y+Math.imul(st,_t)|0,s=s+Math.imul(st,kt)|0,s=s+Math.imul(at,_t)|0,a=a+Math.imul(at,kt)|0,y=y+Math.imul(V,Rt)|0,s=s+Math.imul(V,Tt)|0,s=s+Math.imul(Y,Rt)|0,a=a+Math.imul(Y,Tt)|0,y=y+Math.imul(w,Ot)|0,s=s+Math.imul(w,Lt)|0,s=s+Math.imul(I,Ot)|0,a=a+Math.imul(I,Lt)|0;var Tn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(pt,At),s=Math.imul(pt,It),s=s+Math.imul(gt,At)|0,a=Math.imul(gt,It),y=y+Math.imul(ht,_t)|0,s=s+Math.imul(ht,kt)|0,s=s+Math.imul(dt,_t)|0,a=a+Math.imul(dt,kt)|0,y=y+Math.imul(st,Rt)|0,s=s+Math.imul(st,Tt)|0,s=s+Math.imul(at,Rt)|0,a=a+Math.imul(at,Tt)|0,y=y+Math.imul(V,Ot)|0,s=s+Math.imul(V,Lt)|0,s=s+Math.imul(Y,Ot)|0,a=a+Math.imul(Y,Lt)|0,y=y+Math.imul(w,Ut)|0,s=s+Math.imul(w,Ct)|0,s=s+Math.imul(I,Ut)|0,a=a+Math.imul(I,Ct)|0;var On=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(On>>>26)|0,On&=67108863,y=Math.imul(yt,At),s=Math.imul(yt,It),s=s+Math.imul(mt,At)|0,a=Math.imul(mt,It),y=y+Math.imul(pt,_t)|0,s=s+Math.imul(pt,kt)|0,s=s+Math.imul(gt,_t)|0,a=a+Math.imul(gt,kt)|0,y=y+Math.imul(ht,Rt)|0,s=s+Math.imul(ht,Tt)|0,s=s+Math.imul(dt,Rt)|0,a=a+Math.imul(dt,Tt)|0,y=y+Math.imul(st,Ot)|0,s=s+Math.imul(st,Lt)|0,s=s+Math.imul(at,Ot)|0,a=a+Math.imul(at,Lt)|0,y=y+Math.imul(V,Ut)|0,s=s+Math.imul(V,Ct)|0,s=s+Math.imul(Y,Ut)|0,a=a+Math.imul(Y,Ct)|0,y=y+Math.imul(w,Nt)|0,s=s+Math.imul(w,qt)|0,s=s+Math.imul(I,Nt)|0,a=a+Math.imul(I,qt)|0;var Ln=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,y=Math.imul(wt,At),s=Math.imul(wt,It),s=s+Math.imul(vt,At)|0,a=Math.imul(vt,It),y=y+Math.imul(yt,_t)|0,s=s+Math.imul(yt,kt)|0,s=s+Math.imul(mt,_t)|0,a=a+Math.imul(mt,kt)|0,y=y+Math.imul(pt,Rt)|0,s=s+Math.imul(pt,Tt)|0,s=s+Math.imul(gt,Rt)|0,a=a+Math.imul(gt,Tt)|0,y=y+Math.imul(ht,Ot)|0,s=s+Math.imul(ht,Lt)|0,s=s+Math.imul(dt,Ot)|0,a=a+Math.imul(dt,Lt)|0,y=y+Math.imul(st,Ut)|0,s=s+Math.imul(st,Ct)|0,s=s+Math.imul(at,Ut)|0,a=a+Math.imul(at,Ct)|0,y=y+Math.imul(V,Nt)|0,s=s+Math.imul(V,qt)|0,s=s+Math.imul(Y,Nt)|0,a=a+Math.imul(Y,qt)|0,y=y+Math.imul(w,zt)|0,s=s+Math.imul(w,Ft)|0,s=s+Math.imul(I,zt)|0,a=a+Math.imul(I,Ft)|0;var Un=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,y=Math.imul(bt,At),s=Math.imul(bt,It),s=s+Math.imul(xt,At)|0,a=Math.imul(xt,It),y=y+Math.imul(wt,_t)|0,s=s+Math.imul(wt,kt)|0,s=s+Math.imul(vt,_t)|0,a=a+Math.imul(vt,kt)|0,y=y+Math.imul(yt,Rt)|0,s=s+Math.imul(yt,Tt)|0,s=s+Math.imul(mt,Rt)|0,a=a+Math.imul(mt,Tt)|0,y=y+Math.imul(pt,Ot)|0,s=s+Math.imul(pt,Lt)|0,s=s+Math.imul(gt,Ot)|0,a=a+Math.imul(gt,Lt)|0,y=y+Math.imul(ht,Ut)|0,s=s+Math.imul(ht,Ct)|0,s=s+Math.imul(dt,Ut)|0,a=a+Math.imul(dt,Ct)|0,y=y+Math.imul(st,Nt)|0,s=s+Math.imul(st,qt)|0,s=s+Math.imul(at,Nt)|0,a=a+Math.imul(at,qt)|0,y=y+Math.imul(V,zt)|0,s=s+Math.imul(V,Ft)|0,s=s+Math.imul(Y,zt)|0,a=a+Math.imul(Y,Ft)|0,y=y+Math.imul(w,Dt)|0,s=s+Math.imul(w,Kt)|0,s=s+Math.imul(I,Dt)|0,a=a+Math.imul(I,Kt)|0;var Cn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,y=Math.imul(Et,At),s=Math.imul(Et,It),s=s+Math.imul(Mt,At)|0,a=Math.imul(Mt,It),y=y+Math.imul(bt,_t)|0,s=s+Math.imul(bt,kt)|0,s=s+Math.imul(xt,_t)|0,a=a+Math.imul(xt,kt)|0,y=y+Math.imul(wt,Rt)|0,s=s+Math.imul(wt,Tt)|0,s=s+Math.imul(vt,Rt)|0,a=a+Math.imul(vt,Tt)|0,y=y+Math.imul(yt,Ot)|0,s=s+Math.imul(yt,Lt)|0,s=s+Math.imul(mt,Ot)|0,a=a+Math.imul(mt,Lt)|0,y=y+Math.imul(pt,Ut)|0,s=s+Math.imul(pt,Ct)|0,s=s+Math.imul(gt,Ut)|0,a=a+Math.imul(gt,Ct)|0,y=y+Math.imul(ht,Nt)|0,s=s+Math.imul(ht,qt)|0,s=s+Math.imul(dt,Nt)|0,a=a+Math.imul(dt,qt)|0,y=y+Math.imul(st,zt)|0,s=s+Math.imul(st,Ft)|0,s=s+Math.imul(at,zt)|0,a=a+Math.imul(at,Ft)|0,y=y+Math.imul(V,Dt)|0,s=s+Math.imul(V,Kt)|0,s=s+Math.imul(Y,Dt)|0,a=a+Math.imul(Y,Kt)|0,y=y+Math.imul(w,Pt)|0,s=s+Math.imul(w,Zt)|0,s=s+Math.imul(I,Pt)|0,a=a+Math.imul(I,Zt)|0;var Nn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,y=Math.imul(St,At),s=Math.imul(St,It),s=s+Math.imul(Bt,At)|0,a=Math.imul(Bt,It),y=y+Math.imul(Et,_t)|0,s=s+Math.imul(Et,kt)|0,s=s+Math.imul(Mt,_t)|0,a=a+Math.imul(Mt,kt)|0,y=y+Math.imul(bt,Rt)|0,s=s+Math.imul(bt,Tt)|0,s=s+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Tt)|0,y=y+Math.imul(wt,Ot)|0,s=s+Math.imul(wt,Lt)|0,s=s+Math.imul(vt,Ot)|0,a=a+Math.imul(vt,Lt)|0,y=y+Math.imul(yt,Ut)|0,s=s+Math.imul(yt,Ct)|0,s=s+Math.imul(mt,Ut)|0,a=a+Math.imul(mt,Ct)|0,y=y+Math.imul(pt,Nt)|0,s=s+Math.imul(pt,qt)|0,s=s+Math.imul(gt,Nt)|0,a=a+Math.imul(gt,qt)|0,y=y+Math.imul(ht,zt)|0,s=s+Math.imul(ht,Ft)|0,s=s+Math.imul(dt,zt)|0,a=a+Math.imul(dt,Ft)|0,y=y+Math.imul(st,Dt)|0,s=s+Math.imul(st,Kt)|0,s=s+Math.imul(at,Dt)|0,a=a+Math.imul(at,Kt)|0,y=y+Math.imul(V,Pt)|0,s=s+Math.imul(V,Zt)|0,s=s+Math.imul(Y,Pt)|0,a=a+Math.imul(Y,Zt)|0,y=y+Math.imul(w,Vt)|0,s=s+Math.imul(w,$t)|0,s=s+Math.imul(I,Vt)|0,a=a+Math.imul(I,$t)|0;var qn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,y=Math.imul(St,_t),s=Math.imul(St,kt),s=s+Math.imul(Bt,_t)|0,a=Math.imul(Bt,kt),y=y+Math.imul(Et,Rt)|0,s=s+Math.imul(Et,Tt)|0,s=s+Math.imul(Mt,Rt)|0,a=a+Math.imul(Mt,Tt)|0,y=y+Math.imul(bt,Ot)|0,s=s+Math.imul(bt,Lt)|0,s=s+Math.imul(xt,Ot)|0,a=a+Math.imul(xt,Lt)|0,y=y+Math.imul(wt,Ut)|0,s=s+Math.imul(wt,Ct)|0,s=s+Math.imul(vt,Ut)|0,a=a+Math.imul(vt,Ct)|0,y=y+Math.imul(yt,Nt)|0,s=s+Math.imul(yt,qt)|0,s=s+Math.imul(mt,Nt)|0,a=a+Math.imul(mt,qt)|0,y=y+Math.imul(pt,zt)|0,s=s+Math.imul(pt,Ft)|0,s=s+Math.imul(gt,zt)|0,a=a+Math.imul(gt,Ft)|0,y=y+Math.imul(ht,Dt)|0,s=s+Math.imul(ht,Kt)|0,s=s+Math.imul(dt,Dt)|0,a=a+Math.imul(dt,Kt)|0,y=y+Math.imul(st,Pt)|0,s=s+Math.imul(st,Zt)|0,s=s+Math.imul(at,Pt)|0,a=a+Math.imul(at,Zt)|0,y=y+Math.imul(V,Vt)|0,s=s+Math.imul(V,$t)|0,s=s+Math.imul(Y,Vt)|0,a=a+Math.imul(Y,$t)|0;var zn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,y=Math.imul(St,Rt),s=Math.imul(St,Tt),s=s+Math.imul(Bt,Rt)|0,a=Math.imul(Bt,Tt),y=y+Math.imul(Et,Ot)|0,s=s+Math.imul(Et,Lt)|0,s=s+Math.imul(Mt,Ot)|0,a=a+Math.imul(Mt,Lt)|0,y=y+Math.imul(bt,Ut)|0,s=s+Math.imul(bt,Ct)|0,s=s+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,Ct)|0,y=y+Math.imul(wt,Nt)|0,s=s+Math.imul(wt,qt)|0,s=s+Math.imul(vt,Nt)|0,a=a+Math.imul(vt,qt)|0,y=y+Math.imul(yt,zt)|0,s=s+Math.imul(yt,Ft)|0,s=s+Math.imul(mt,zt)|0,a=a+Math.imul(mt,Ft)|0,y=y+Math.imul(pt,Dt)|0,s=s+Math.imul(pt,Kt)|0,s=s+Math.imul(gt,Dt)|0,a=a+Math.imul(gt,Kt)|0,y=y+Math.imul(ht,Pt)|0,s=s+Math.imul(ht,Zt)|0,s=s+Math.imul(dt,Pt)|0,a=a+Math.imul(dt,Zt)|0,y=y+Math.imul(st,Vt)|0,s=s+Math.imul(st,$t)|0,s=s+Math.imul(at,Vt)|0,a=a+Math.imul(at,$t)|0;var Fn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,y=Math.imul(St,Ot),s=Math.imul(St,Lt),s=s+Math.imul(Bt,Ot)|0,a=Math.imul(Bt,Lt),y=y+Math.imul(Et,Ut)|0,s=s+Math.imul(Et,Ct)|0,s=s+Math.imul(Mt,Ut)|0,a=a+Math.imul(Mt,Ct)|0,y=y+Math.imul(bt,Nt)|0,s=s+Math.imul(bt,qt)|0,s=s+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,qt)|0,y=y+Math.imul(wt,zt)|0,s=s+Math.imul(wt,Ft)|0,s=s+Math.imul(vt,zt)|0,a=a+Math.imul(vt,Ft)|0,y=y+Math.imul(yt,Dt)|0,s=s+Math.imul(yt,Kt)|0,s=s+Math.imul(mt,Dt)|0,a=a+Math.imul(mt,Kt)|0,y=y+Math.imul(pt,Pt)|0,s=s+Math.imul(pt,Zt)|0,s=s+Math.imul(gt,Pt)|0,a=a+Math.imul(gt,Zt)|0,y=y+Math.imul(ht,Vt)|0,s=s+Math.imul(ht,$t)|0,s=s+Math.imul(dt,Vt)|0,a=a+Math.imul(dt,$t)|0;var Dn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,y=Math.imul(St,Ut),s=Math.imul(St,Ct),s=s+Math.imul(Bt,Ut)|0,a=Math.imul(Bt,Ct),y=y+Math.imul(Et,Nt)|0,s=s+Math.imul(Et,qt)|0,s=s+Math.imul(Mt,Nt)|0,a=a+Math.imul(Mt,qt)|0,y=y+Math.imul(bt,zt)|0,s=s+Math.imul(bt,Ft)|0,s=s+Math.imul(xt,zt)|0,a=a+Math.imul(xt,Ft)|0,y=y+Math.imul(wt,Dt)|0,s=s+Math.imul(wt,Kt)|0,s=s+Math.imul(vt,Dt)|0,a=a+Math.imul(vt,Kt)|0,y=y+Math.imul(yt,Pt)|0,s=s+Math.imul(yt,Zt)|0,s=s+Math.imul(mt,Pt)|0,a=a+Math.imul(mt,Zt)|0,y=y+Math.imul(pt,Vt)|0,s=s+Math.imul(pt,$t)|0,s=s+Math.imul(gt,Vt)|0,a=a+Math.imul(gt,$t)|0;var Kn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,y=Math.imul(St,Nt),s=Math.imul(St,qt),s=s+Math.imul(Bt,Nt)|0,a=Math.imul(Bt,qt),y=y+Math.imul(Et,zt)|0,s=s+Math.imul(Et,Ft)|0,s=s+Math.imul(Mt,zt)|0,a=a+Math.imul(Mt,Ft)|0,y=y+Math.imul(bt,Dt)|0,s=s+Math.imul(bt,Kt)|0,s=s+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,Kt)|0,y=y+Math.imul(wt,Pt)|0,s=s+Math.imul(wt,Zt)|0,s=s+Math.imul(vt,Pt)|0,a=a+Math.imul(vt,Zt)|0,y=y+Math.imul(yt,Vt)|0,s=s+Math.imul(yt,$t)|0,s=s+Math.imul(mt,Vt)|0,a=a+Math.imul(mt,$t)|0;var Pn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,y=Math.imul(St,zt),s=Math.imul(St,Ft),s=s+Math.imul(Bt,zt)|0,a=Math.imul(Bt,Ft),y=y+Math.imul(Et,Dt)|0,s=s+Math.imul(Et,Kt)|0,s=s+Math.imul(Mt,Dt)|0,a=a+Math.imul(Mt,Kt)|0,y=y+Math.imul(bt,Pt)|0,s=s+Math.imul(bt,Zt)|0,s=s+Math.imul(xt,Pt)|0,a=a+Math.imul(xt,Zt)|0,y=y+Math.imul(wt,Vt)|0,s=s+Math.imul(wt,$t)|0,s=s+Math.imul(vt,Vt)|0,a=a+Math.imul(vt,$t)|0;var Zn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,y=Math.imul(St,Dt),s=Math.imul(St,Kt),s=s+Math.imul(Bt,Dt)|0,a=Math.imul(Bt,Kt),y=y+Math.imul(Et,Pt)|0,s=s+Math.imul(Et,Zt)|0,s=s+Math.imul(Mt,Pt)|0,a=a+Math.imul(Mt,Zt)|0,y=y+Math.imul(bt,Vt)|0,s=s+Math.imul(bt,$t)|0,s=s+Math.imul(xt,Vt)|0,a=a+Math.imul(xt,$t)|0;var Vn=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,y=Math.imul(St,Pt),s=Math.imul(St,Zt),s=s+Math.imul(Bt,Pt)|0,a=Math.imul(Bt,Zt),y=y+Math.imul(Et,Vt)|0,s=s+Math.imul(Et,$t)|0,s=s+Math.imul(Mt,Vt)|0,a=a+Math.imul(Mt,$t)|0;var $n=(E+y|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,y=Math.imul(St,Vt),s=Math.imul(St,$t),s=s+Math.imul(Bt,Vt)|0,a=Math.imul(Bt,$t);var jn=(E+y|0)+((s&8191)<<13)|0;return E=(a+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,v[0]=_n,v[1]=kn,v[2]=Rn,v[3]=Tn,v[4]=On,v[5]=Ln,v[6]=Un,v[7]=Cn,v[8]=Nn,v[9]=qn,v[10]=zn,v[11]=Fn,v[12]=Dn,v[13]=Kn,v[14]=Pn,v[15]=Zn,v[16]=Vn,v[17]=$n,v[18]=jn,E!==0&&(v[19]=E,l.length++),l};Math.imul||(P=z);function D(h,i,u){u.negative=i.negative^h.negative,u.length=h.length+i.length;for(var l=0,g=0,m=0;m<u.length-1;m++){var v=g;g=0;for(var E=l&67108863,y=Math.min(m,i.length-1),s=Math.max(0,m-h.length+1);s<=y;s++){var a=m-s,d=h.words[a]|0,w=i.words[s]|0,I=d*w,q=I&67108863;v=v+(I/67108864|0)|0,q=q+E|0,E=q&67108863,v=v+(q>>>26)|0,g+=v>>>26,v&=67108863}u.words[m]=E,l=v,v=g}return l!==0?u.words[m]=l:u.length--,u._strip()}function W(h,i,u){return D(h,i,u)}o.prototype.mulTo=function(i,u){var l,g=this.length+i.length;return this.length===10&&i.length===10?l=P(this,i,u):g<63?l=z(this,i,u):g<1024?l=D(this,i,u):l=W(this,i,u),l},o.prototype.mul=function(i){var u=new o(null);return u.words=new Array(this.length+i.length),this.mulTo(i,u)},o.prototype.mulf=function(i){var u=new o(null);return u.words=new Array(this.length+i.length),W(this,i,u)},o.prototype.imul=function(i){return this.clone().mulTo(i,this)},o.prototype.imuln=function(i){var u=i<0;u&&(i=-i),e(typeof i=="number"),e(i<67108864);for(var l=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*i,v=(m&67108863)+(l&67108863);l>>=26,l+=m/67108864|0,l+=v>>>26,this.words[g]=v&67108863}return l!==0&&(this.words[g]=l,this.length++),this.length=i===0?1:this.length,u?this.ineg():this},o.prototype.muln=function(i){return this.clone().imuln(i)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(i){var u=N(i);if(u.length===0)return new o(1);for(var l=this,g=0;g<u.length&&u[g]===0;g++,l=l.sqr());if(++g<u.length)for(var m=l.sqr();g<u.length;g++,m=m.sqr())u[g]!==0&&(l=l.mul(m));return l},o.prototype.iushln=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,g=67108863>>>26-u<<26-u,m;if(u!==0){var v=0;for(m=0;m<this.length;m++){var E=this.words[m]&g,y=(this.words[m]|0)-E<<u;this.words[m]=y|v,v=E>>>26-u}v&&(this.words[m]=v,this.length++)}if(l!==0){for(m=this.length-1;m>=0;m--)this.words[m+l]=this.words[m];for(m=0;m<l;m++)this.words[m]=0;this.length+=l}return this._strip()},o.prototype.ishln=function(i){return e(this.negative===0),this.iushln(i)},o.prototype.iushrn=function(i,u,l){e(typeof i=="number"&&i>=0);var g;u?g=(u-u%26)/26:g=0;var m=i%26,v=Math.min((i-m)/26,this.length),E=67108863^67108863>>>m<<m,y=l;if(g-=v,g=Math.max(0,g),y){for(var s=0;s<v;s++)y.words[s]=this.words[s];y.length=v}if(v!==0)if(this.length>v)for(this.length-=v,s=0;s<this.length;s++)this.words[s]=this.words[s+v];else this.words[0]=0,this.length=1;var a=0;for(s=this.length-1;s>=0&&(a!==0||s>=g);s--){var d=this.words[s]|0;this.words[s]=a<<26-m|d>>>m,a=d&E}return y&&a!==0&&(y.words[y.length++]=a),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(i,u,l){return e(this.negative===0),this.iushrn(i,u,l)},o.prototype.shln=function(i){return this.clone().ishln(i)},o.prototype.ushln=function(i){return this.clone().iushln(i)},o.prototype.shrn=function(i){return this.clone().ishrn(i)},o.prototype.ushrn=function(i){return this.clone().iushrn(i)},o.prototype.testn=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,g=1<<u;if(this.length<=l)return!1;var m=this.words[l];return!!(m&g)},o.prototype.imaskn=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var g=67108863^67108863>>>u<<u;this.words[this.length-1]&=g}return this._strip()},o.prototype.maskn=function(i){return this.clone().imaskn(i)},o.prototype.iaddn=function(i){return e(typeof i=="number"),e(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},o.prototype._iaddn=function(i){this.words[0]+=i;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(i){if(e(typeof i=="number"),e(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},o.prototype.addn=function(i){return this.clone().iaddn(i)},o.prototype.subn=function(i){return this.clone().isubn(i)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(i,u,l){var g=i.length+l,m;this._expand(g);var v,E=0;for(m=0;m<i.length;m++){v=(this.words[m+l]|0)+E;var y=(i.words[m]|0)*u;v-=y&67108863,E=(v>>26)-(y/67108864|0),this.words[m+l]=v&67108863}for(;m<this.length-l;m++)v=(this.words[m+l]|0)+E,E=v>>26,this.words[m+l]=v&67108863;if(E===0)return this._strip();for(e(E===-1),E=0,m=0;m<this.length;m++)v=-(this.words[m]|0)+E,E=v>>26,this.words[m]=v&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(i,u){var l=this.length-i.length,g=this.clone(),m=i,v=m.words[m.length-1]|0,E=this._countBits(v);l=26-E,l!==0&&(m=m.ushln(l),g.iushln(l),v=m.words[m.length-1]|0);var y=g.length-m.length,s;if(u!=="mod"){s=new o(null),s.length=y+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var d=g.clone()._ishlnsubmul(m,1,y);d.negative===0&&(g=d,s&&(s.words[y]=1));for(var w=y-1;w>=0;w--){var I=(g.words[m.length+w]|0)*67108864+(g.words[m.length+w-1]|0);for(I=Math.min(I/v|0,67108863),g._ishlnsubmul(m,I,w);g.negative!==0;)I--,g.negative=0,g._ishlnsubmul(m,1,w),g.isZero()||(g.negative^=1);s&&(s.words[w]=I)}return s&&s._strip(),g._strip(),u!=="div"&&l!==0&&g.iushrn(l),{div:s||null,mod:g}},o.prototype.divmod=function(i,u,l){if(e(!i.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var g,m,v;return this.negative!==0&&i.negative===0?(v=this.neg().divmod(i,u),u!=="mod"&&(g=v.div.neg()),u!=="div"&&(m=v.mod.neg(),l&&m.negative!==0&&m.iadd(i)),{div:g,mod:m}):this.negative===0&&i.negative!==0?(v=this.divmod(i.neg(),u),u!=="mod"&&(g=v.div.neg()),{div:g,mod:v.mod}):(this.negative&i.negative)!==0?(v=this.neg().divmod(i.neg(),u),u!=="div"&&(m=v.mod.neg(),l&&m.negative!==0&&m.isub(i)),{div:v.div,mod:m}):i.length>this.length||this.cmp(i)<0?{div:new o(0),mod:this}:i.length===1?u==="div"?{div:this.divn(i.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new o(this.modrn(i.words[0]))}:this._wordDiv(i,u)},o.prototype.div=function(i){return this.divmod(i,"div",!1).div},o.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},o.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},o.prototype.divRound=function(i){var u=this.divmod(i);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(i):u.mod,g=i.ushrn(1),m=i.andln(1),v=l.cmp(g);return v<0||m===1&&v===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modrn=function(i){var u=i<0;u&&(i=-i),e(i<=67108863);for(var l=(1<<26)%i,g=0,m=this.length-1;m>=0;m--)g=(l*g+(this.words[m]|0))%i;return u?-g:g},o.prototype.modn=function(i){return this.modrn(i)},o.prototype.idivn=function(i){var u=i<0;u&&(i=-i),e(i<=67108863);for(var l=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+l*67108864;this.words[g]=m/i|0,l=m%i}return this._strip(),u?this.ineg():this},o.prototype.divn=function(i){return this.clone().idivn(i)},o.prototype.egcd=function(i){e(i.negative===0),e(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var g=new o(1),m=new o(0),v=new o(0),E=new o(1),y=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++y;for(var s=l.clone(),a=u.clone();!u.isZero();){for(var d=0,w=1;(u.words[0]&w)===0&&d<26;++d,w<<=1);if(d>0)for(u.iushrn(d);d-- >0;)(g.isOdd()||m.isOdd())&&(g.iadd(s),m.isub(a)),g.iushrn(1),m.iushrn(1);for(var I=0,q=1;(l.words[0]&q)===0&&I<26;++I,q<<=1);if(I>0)for(l.iushrn(I);I-- >0;)(v.isOdd()||E.isOdd())&&(v.iadd(s),E.isub(a)),v.iushrn(1),E.iushrn(1);u.cmp(l)>=0?(u.isub(l),g.isub(v),m.isub(E)):(l.isub(u),v.isub(g),E.isub(m))}return{a:v,b:E,gcd:l.iushln(y)}},o.prototype._invmp=function(i){e(i.negative===0),e(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var g=new o(1),m=new o(0),v=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var E=0,y=1;(u.words[0]&y)===0&&E<26;++E,y<<=1);if(E>0)for(u.iushrn(E);E-- >0;)g.isOdd()&&g.iadd(v),g.iushrn(1);for(var s=0,a=1;(l.words[0]&a)===0&&s<26;++s,a<<=1);if(s>0)for(l.iushrn(s);s-- >0;)m.isOdd()&&m.iadd(v),m.iushrn(1);u.cmp(l)>=0?(u.isub(l),g.isub(m)):(l.isub(u),m.isub(g))}var d;return u.cmpn(1)===0?d=g:d=m,d.cmpn(0)<0&&d.iadd(i),d},o.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var u=this.clone(),l=i.clone();u.negative=0,l.negative=0;for(var g=0;u.isEven()&&l.isEven();g++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var m=u.cmp(l);if(m<0){var v=u;u=l,l=v}else if(m===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(g)},o.prototype.invm=function(i){return this.egcd(i).a.umod(i)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(i){return this.words[0]&i},o.prototype.bincn=function(i){e(typeof i=="number");var u=i%26,l=(i-u)/26,g=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=g,this;for(var m=g,v=l;m!==0&&v<this.length;v++){var E=this.words[v]|0;E+=m,m=E>>>26,E&=67108863,this.words[v]=E}return m!==0&&(this.words[v]=m,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(i){var u=i<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var l;if(this.length>1)l=1;else{u&&(i=-i),e(i<=67108863,"Number is too big");var g=this.words[0]|0;l=g===i?0:g<i?-1:1}return this.negative!==0?-l|0:l},o.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var u=this.ucmp(i);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var g=this.words[l]|0,m=i.words[l]|0;if(g!==m){g<m?u=-1:g>m&&(u=1);break}}return u},o.prototype.gtn=function(i){return this.cmpn(i)===1},o.prototype.gt=function(i){return this.cmp(i)===1},o.prototype.gten=function(i){return this.cmpn(i)>=0},o.prototype.gte=function(i){return this.cmp(i)>=0},o.prototype.ltn=function(i){return this.cmpn(i)===-1},o.prototype.lt=function(i){return this.cmp(i)===-1},o.prototype.lten=function(i){return this.cmpn(i)<=0},o.prototype.lte=function(i){return this.cmp(i)<=0},o.prototype.eqn=function(i){return this.cmpn(i)===0},o.prototype.eq=function(i){return this.cmp(i)===0},o.red=function(i){return new O(i)},o.prototype.toRed=function(i){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},o.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(i){return this.red=i,this},o.prototype.forceRed=function(i){return e(!this.red,"Already a number in reduction context"),this._forceRed(i)},o.prototype.redAdd=function(i){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},o.prototype.redIAdd=function(i){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},o.prototype.redSub=function(i){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},o.prototype.redISub=function(i){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},o.prototype.redShl=function(i){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},o.prototype.redMul=function(i){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},o.prototype.redIMul=function(i){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},o.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(i){return e(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var H={k256:null,p224:null,p192:null,p25519:null};function G(h,i){this.name=h,this.p=new o(i,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var i=new o(null);return i.words=new Array(Math.ceil(this.n/13)),i},G.prototype.ireduce=function(i){var u=i,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var g=l<this.n?-1:u.ucmp(this.p);return g===0?(u.words[0]=0,u.length=1):g>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},G.prototype.split=function(i,u){i.iushrn(this.n,0,u)},G.prototype.imulK=function(i){return i.imul(this.k)};function tt(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(tt,G),tt.prototype.split=function(i,u){for(var l=4194303,g=Math.min(i.length,9),m=0;m<g;m++)u.words[m]=i.words[m];if(u.length=g,i.length<=9){i.words[0]=0,i.length=1;return}var v=i.words[9];for(u.words[u.length++]=v&l,m=10;m<i.length;m++){var E=i.words[m]|0;i.words[m-10]=(E&l)<<4|v>>>22,v=E}v>>>=22,i.words[m-10]=v,v===0&&i.length>10?i.length-=10:i.length-=9},tt.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var u=0,l=0;l<i.length;l++){var g=i.words[l]|0;u+=g*977,i.words[l]=u&67108863,u=g*64+(u/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function J(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(J,G);function S(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(S,G);function B(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(B,G),B.prototype.imulK=function(i){for(var u=0,l=0;l<i.length;l++){var g=(i.words[l]|0)*19+u,m=g&67108863;g>>>=26,i.words[l]=m,u=g}return u!==0&&(i.words[i.length++]=u),i},o._prime=function(i){if(H[i])return H[i];var u;if(i==="k256")u=new tt;else if(i==="p224")u=new J;else if(i==="p192")u=new S;else if(i==="p25519")u=new B;else throw new Error("Unknown prime "+i);return H[i]=u,u};function O(h){if(typeof h=="string"){var i=o._prime(h);this.m=i.p,this.prime=i}else e(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}O.prototype._verify1=function(i){e(i.negative===0,"red works only with positives"),e(i.red,"red works only with red numbers")},O.prototype._verify2=function(i,u){e((i.negative|u.negative)===0,"red works only with positives"),e(i.red&&i.red===u.red,"red works only with red numbers")},O.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(_(i,i.umod(this.m)._forceRed(this)),i)},O.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},O.prototype.add=function(i,u){this._verify2(i,u);var l=i.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},O.prototype.iadd=function(i,u){this._verify2(i,u);var l=i.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},O.prototype.sub=function(i,u){this._verify2(i,u);var l=i.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},O.prototype.isub=function(i,u){this._verify2(i,u);var l=i.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},O.prototype.shl=function(i,u){return this._verify1(i),this.imod(i.ushln(u))},O.prototype.imul=function(i,u){return this._verify2(i,u),this.imod(i.imul(u))},O.prototype.mul=function(i,u){return this._verify2(i,u),this.imod(i.mul(u))},O.prototype.isqr=function(i){return this.imul(i,i.clone())},O.prototype.sqr=function(i){return this.mul(i,i)},O.prototype.sqrt=function(i){if(i.isZero())return i.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var l=this.m.add(new o(1)).iushrn(2);return this.pow(i,l)}for(var g=this.m.subn(1),m=0;!g.isZero()&&g.andln(1)===0;)m++,g.iushrn(1);e(!g.isZero());var v=new o(1).toRed(this),E=v.redNeg(),y=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new o(2*s*s).toRed(this);this.pow(s,y).cmp(E)!==0;)s.redIAdd(E);for(var a=this.pow(s,g),d=this.pow(i,g.addn(1).iushrn(1)),w=this.pow(i,g),I=m;w.cmp(v)!==0;){for(var q=w,V=0;q.cmp(v)!==0;V++)q=q.redSqr();e(V<I);var Y=this.pow(a,new o(1).iushln(I-V-1));d=d.redMul(Y),a=Y.redSqr(),w=w.redMul(a),I=V}return d},O.prototype.invm=function(i){var u=i._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},O.prototype.pow=function(i,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return i.clone();var l=4,g=new Array(1<<l);g[0]=new o(1).toRed(this),g[1]=i;for(var m=2;m<g.length;m++)g[m]=this.mul(g[m-1],i);var v=g[0],E=0,y=0,s=u.bitLength()%26;for(s===0&&(s=26),m=u.length-1;m>=0;m--){for(var a=u.words[m],d=s-1;d>=0;d--){var w=a>>d&1;if(v!==g[0]&&(v=this.sqr(v)),w===0&&E===0){y=0;continue}E<<=1,E|=w,y++,!(y!==l&&(m!==0||d!==0))&&(v=this.mul(v,g[E]),y=0,E=0)}s=26}return v},O.prototype.convertTo=function(i){var u=i.umod(this.m);return u===i?u.clone():u},O.prototype.convertFrom=function(i){var u=i.clone();return u.red=null,u},o.mont=function(i){return new L(i)};function L(h){O.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(L,O),L.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},L.prototype.convertFrom=function(i){var u=this.imod(i.mul(this.rinv));return u.red=null,u},L.prototype.imul=function(i,u){if(i.isZero()||u.isZero())return i.words[0]=0,i.length=1,i;var l=i.imul(u),g=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=l.isub(g).iushrn(this.shift),v=m;return m.cmp(this.m)>=0?v=m.isub(this.m):m.cmpn(0)<0&&(v=m.iadd(this.m)),v._forceRed(this)},L.prototype.mul=function(i,u){if(i.isZero()||u.isZero())return new o(0)._forceRed(this);var l=i.mul(u),g=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=l.isub(g).iushrn(this.shift),v=m;return m.cmp(this.m)>=0?v=m.isub(this.m):m.cmpn(0)<0&&(v=m.iadd(this.m)),v._forceRed(this)},L.prototype.invm=function(i){var u=this.imod(i._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(t,so)})(rn)),rn.exports}var oo=Ri();const ri=_i(oo);var ii,Wn,Xn=0,Jn=0;function ao(t,r,n){var e=r&&n||0,c=r||new Array(16);t=t||{};var o=t.node||ii,f=t.clockseq!==void 0?t.clockseq:Wn;if(o==null||f==null){var b=t.random||(t.rng||Os)();o==null&&(o=ii=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]),f==null&&(f=Wn=(b[6]<<8|b[7])&16383)}var p=t.msecs!==void 0?t.msecs:Date.now(),M=t.nsecs!==void 0?t.nsecs:Jn+1,_=p-Xn+(M-Jn)/1e4;if(_<0&&t.clockseq===void 0&&(f=f+1&16383),(_<0||p>Xn)&&t.nsecs===void 0&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Xn=p,Jn=M,Wn=f,p+=122192928e5;var C=((p&268435455)*1e4+M)%4294967296;c[e++]=C>>>24&255,c[e++]=C>>>16&255,c[e++]=C>>>8&255,c[e++]=C&255;var A=p/4294967296*1e4&268435455;c[e++]=A>>>8&255,c[e++]=A&255,c[e++]=A>>>24&15|16,c[e++]=A>>>16&255,c[e++]=f>>>8|128,c[e++]=f&255;for(var k=0;k<6;++k)c[e+k]=o[k];return r||br(c)}function Ti(t){if(!xr(t))throw TypeError("Invalid UUID");var r,n=new Uint8Array(16);return n[0]=(r=parseInt(t.slice(0,8),16))>>>24,n[1]=r>>>16&255,n[2]=r>>>8&255,n[3]=r&255,n[4]=(r=parseInt(t.slice(9,13),16))>>>8,n[5]=r&255,n[6]=(r=parseInt(t.slice(14,18),16))>>>8,n[7]=r&255,n[8]=(r=parseInt(t.slice(19,23),16))>>>8,n[9]=r&255,n[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=r/4294967296&255,n[12]=r>>>24&255,n[13]=r>>>16&255,n[14]=r>>>8&255,n[15]=r&255,n}function uo(t){t=unescape(encodeURIComponent(t));for(var r=[],n=0;n<t.length;++n)r.push(t.charCodeAt(n));return r}var co="6ba7b810-9dad-11d1-80b4-00c04fd430c8",fo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Oi(t,r,n){function e(c,o,f,b){if(typeof c=="string"&&(c=uo(c)),typeof o=="string"&&(o=Ti(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+c.length);if(p.set(o),p.set(c,o.length),p=n(p),p[6]=p[6]&15|r,p[8]=p[8]&63|128,f){b=b||0;for(var M=0;M<16;++M)f[b+M]=p[M];return f}return br(p)}try{e.name=t}catch{}return e.DNS=co,e.URL=fo,e}function lo(t){if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=new Uint8Array(r.length);for(var n=0;n<r.length;++n)t[n]=r.charCodeAt(n)}return ho(po(go(t),t.length*8))}function ho(t){for(var r=[],n=t.length*32,e="0123456789abcdef",c=0;c<n;c+=8){var o=t[c>>5]>>>c%32&255,f=parseInt(e.charAt(o>>>4&15)+e.charAt(o&15),16);r.push(f)}return r}function Li(t){return(t+64>>>9<<4)+14+1}function po(t,r){t[r>>5]|=128<<r%32,t[Li(r)-1]=r;for(var n=1732584193,e=-271733879,c=-1732584194,o=271733878,f=0;f<t.length;f+=16){var b=n,p=e,M=c,_=o;n=Ht(n,e,c,o,t[f],7,-680876936),o=Ht(o,n,e,c,t[f+1],12,-389564586),c=Ht(c,o,n,e,t[f+2],17,606105819),e=Ht(e,c,o,n,t[f+3],22,-1044525330),n=Ht(n,e,c,o,t[f+4],7,-176418897),o=Ht(o,n,e,c,t[f+5],12,1200080426),c=Ht(c,o,n,e,t[f+6],17,-1473231341),e=Ht(e,c,o,n,t[f+7],22,-45705983),n=Ht(n,e,c,o,t[f+8],7,1770035416),o=Ht(o,n,e,c,t[f+9],12,-1958414417),c=Ht(c,o,n,e,t[f+10],17,-42063),e=Ht(e,c,o,n,t[f+11],22,-1990404162),n=Ht(n,e,c,o,t[f+12],7,1804603682),o=Ht(o,n,e,c,t[f+13],12,-40341101),c=Ht(c,o,n,e,t[f+14],17,-1502002290),e=Ht(e,c,o,n,t[f+15],22,1236535329),n=Wt(n,e,c,o,t[f+1],5,-165796510),o=Wt(o,n,e,c,t[f+6],9,-1069501632),c=Wt(c,o,n,e,t[f+11],14,643717713),e=Wt(e,c,o,n,t[f],20,-373897302),n=Wt(n,e,c,o,t[f+5],5,-701558691),o=Wt(o,n,e,c,t[f+10],9,38016083),c=Wt(c,o,n,e,t[f+15],14,-660478335),e=Wt(e,c,o,n,t[f+4],20,-405537848),n=Wt(n,e,c,o,t[f+9],5,568446438),o=Wt(o,n,e,c,t[f+14],9,-1019803690),c=Wt(c,o,n,e,t[f+3],14,-187363961),e=Wt(e,c,o,n,t[f+8],20,1163531501),n=Wt(n,e,c,o,t[f+13],5,-1444681467),o=Wt(o,n,e,c,t[f+2],9,-51403784),c=Wt(c,o,n,e,t[f+7],14,1735328473),e=Wt(e,c,o,n,t[f+12],20,-1926607734),n=Xt(n,e,c,o,t[f+5],4,-378558),o=Xt(o,n,e,c,t[f+8],11,-2022574463),c=Xt(c,o,n,e,t[f+11],16,1839030562),e=Xt(e,c,o,n,t[f+14],23,-35309556),n=Xt(n,e,c,o,t[f+1],4,-1530992060),o=Xt(o,n,e,c,t[f+4],11,1272893353),c=Xt(c,o,n,e,t[f+7],16,-155497632),e=Xt(e,c,o,n,t[f+10],23,-1094730640),n=Xt(n,e,c,o,t[f+13],4,681279174),o=Xt(o,n,e,c,t[f],11,-358537222),c=Xt(c,o,n,e,t[f+3],16,-722521979),e=Xt(e,c,o,n,t[f+6],23,76029189),n=Xt(n,e,c,o,t[f+9],4,-640364487),o=Xt(o,n,e,c,t[f+12],11,-421815835),c=Xt(c,o,n,e,t[f+15],16,530742520),e=Xt(e,c,o,n,t[f+2],23,-995338651),n=Jt(n,e,c,o,t[f],6,-198630844),o=Jt(o,n,e,c,t[f+7],10,1126891415),c=Jt(c,o,n,e,t[f+14],15,-1416354905),e=Jt(e,c,o,n,t[f+5],21,-57434055),n=Jt(n,e,c,o,t[f+12],6,1700485571),o=Jt(o,n,e,c,t[f+3],10,-1894986606),c=Jt(c,o,n,e,t[f+10],15,-1051523),e=Jt(e,c,o,n,t[f+1],21,-2054922799),n=Jt(n,e,c,o,t[f+8],6,1873313359),o=Jt(o,n,e,c,t[f+15],10,-30611744),c=Jt(c,o,n,e,t[f+6],15,-1560198380),e=Jt(e,c,o,n,t[f+13],21,1309151649),n=Jt(n,e,c,o,t[f+4],6,-145523070),o=Jt(o,n,e,c,t[f+11],10,-1120210379),c=Jt(c,o,n,e,t[f+2],15,718787259),e=Jt(e,c,o,n,t[f+9],21,-343485551),n=xe(n,b),e=xe(e,p),c=xe(c,M),o=xe(o,_)}return[n,e,c,o]}function go(t){if(t.length===0)return[];for(var r=t.length*8,n=new Uint32Array(Li(r)),e=0;e<r;e+=8)n[e>>5]|=(t[e/8]&255)<<e%32;return n}function xe(t,r){var n=(t&65535)+(r&65535),e=(t>>16)+(r>>16)+(n>>16);return e<<16|n&65535}function yo(t,r){return t<<r|t>>>32-r}function xn(t,r,n,e,c,o){return xe(yo(xe(xe(r,t),xe(e,o)),c),n)}function Ht(t,r,n,e,c,o,f){return xn(r&n|~r&e,t,r,c,o,f)}function Wt(t,r,n,e,c,o,f){return xn(r&e|n&~e,t,r,c,o,f)}function Xt(t,r,n,e,c,o,f){return xn(r^n^e,t,r,c,o,f)}function Jt(t,r,n,e,c,o,f){return xn(n^(r|~e),t,r,c,o,f)}var mo=Oi("v3",48,lo);function wo(t,r,n,e){switch(t){case 0:return r&n^~r&e;case 1:return r^n^e;case 2:return r&n^r&e^n&e;case 3:return r^n^e}}function Qn(t,r){return t<<r|t>>>32-r}function vo(t){var r=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=[];for(var c=0;c<e.length;++c)t.push(e.charCodeAt(c))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,f=Math.ceil(o/16),b=new Array(f),p=0;p<f;++p){for(var M=new Uint32Array(16),_=0;_<16;++_)M[_]=t[p*64+_*4]<<24|t[p*64+_*4+1]<<16|t[p*64+_*4+2]<<8|t[p*64+_*4+3];b[p]=M}b[f-1][14]=(t.length-1)*8/Math.pow(2,32),b[f-1][14]=Math.floor(b[f-1][14]),b[f-1][15]=(t.length-1)*8&4294967295;for(var C=0;C<f;++C){for(var A=new Uint32Array(80),k=0;k<16;++k)A[k]=b[C][k];for(var U=16;U<80;++U)A[U]=Qn(A[U-3]^A[U-8]^A[U-14]^A[U-16],1);for(var F=n[0],N=n[1],z=n[2],P=n[3],D=n[4],W=0;W<80;++W){var H=Math.floor(W/20),G=Qn(F,5)+wo(H,N,z,P)+D+r[H]+A[W]>>>0;D=P,P=z,z=Qn(N,30)>>>0,N=F,F=G}n[0]=n[0]+F>>>0,n[1]=n[1]+N>>>0,n[2]=n[2]+z>>>0,n[3]=n[3]+P>>>0,n[4]=n[4]+D>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var bo=Oi("v5",80,vo);const xo="00000000-0000-0000-0000-000000000000";function Eo(t){if(!xr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Mo=Object.freeze(Object.defineProperty({__proto__:null,NIL:xo,parse:Ti,stringify:br,v1:ao,v3:mo,v4:Ls,v5:bo,validate:xr,version:Eo},Symbol.toStringTag,{value:"Module"}));class So extends Us{async init(r){}async getIdentityToken(){if(!this.provider||!this.canAuthorize)throw ue.notConnectedError();if(!this.coreOptions)throw ti.invalidParams("Please initialize Web3Auth with a valid options");this.status=ie.AUTHORIZING,this.emit(ce.AUTHORIZING,{connector:this.name});const r=await this.provider.request({method:Gn.GET_ACCOUNTS});if(r&&r.length>0){const n=Cs(r[0],this.name);if(n&&!Ns(n))return this.status=ie.AUTHORIZED,this.emit(ce.AUTHORIZED,{connector:this.name,identityTokenInfo:{idToken:n}}),{idToken:n};const e=await this.provider.request({method:"solana_chainId"}),c=this.coreOptions.chains.find(_=>_.chainId===e);if(!c)throw ti.invalidParams("chainConfig is required before authentication");const{chainNamespace:o}=c,f={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(e,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},b=await qs(f,o),p=await this.provider.request({method:Gn.SIGN_MESSAGE,params:{data:b,display:"utf8"}}),M=await zs(o,p,b,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return Fs(r[0],this.name,M),this.status=ie.AUTHORIZED,this.emit(ce.AUTHORIZED,{connector:this.name,identityTokenInfo:{idToken:M}}),{idToken:M}}throw ue.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const r=await this.provider.request({method:Gn.GET_ACCOUNTS});r&&r.length>0&&Ds(r[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(ce.DISCONNECTED)}}var Bo=function(t,r,n,e){if(n==="a"&&!e)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?t!==r||!e:!r.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?e:n==="a"?e.call(t):e?e.value:r.get(t)},Ao=function(t,r,n,e,c){if(e==="m")throw new TypeError("Private method is not writable");if(e==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?t!==r||!c:!r.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e==="a"?c.call(t,n):c?c.value=n:r.set(t,n),n},sn;let $e;const En=new Set;function Io(t){je=void 0,En.add(t)}function _o(t){je=void 0,En.delete(t)}const Le={};function ec(){if($e||($e=Object.freeze({register:si,get:ko,on:Ro}),typeof window>"u"))return $e;const t=Object.freeze({register:si});try{window.addEventListener("wallet-standard:register-wallet",({detail:r})=>r(t))}catch(r){console.error(`wallet-standard:register-wallet event listener could not be added
`,r)}try{window.dispatchEvent(new To(t))}catch(r){console.error(`wallet-standard:app-ready event could not be dispatched
`,r)}return $e}function si(...t){var r;return t=t.filter(n=>!En.has(n)),t.length?(t.forEach(n=>Io(n)),(r=Le.register)==null||r.forEach(n=>oi(()=>n(...t))),function(){var e;t.forEach(c=>_o(c)),(e=Le.unregister)==null||e.forEach(c=>oi(()=>c(...t)))}):()=>{}}let je;function ko(){return je||(je=[...En]),je}function Ro(t,r){var n;return(n=Le[t])!=null&&n.push(r)||(Le[t]=[r]),function(){var c;Le[t]=(c=Le[t])==null?void 0:c.filter(o=>r!==o)}}function oi(t){try{t()}catch(r){console.error(r)}}class To extends Event{get detail(){return Bo(this,sn,"f")}get type(){return"wallet-standard:app-ready"}constructor(r){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),sn.set(this,void 0),Ao(this,sn,r,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}sn=new WeakMap;const Ui="solana:signAndSendTransaction",Ci="solana:signMessage",dr="solana:signTransaction",Ni="standard:connect",Oo="standard:disconnect";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mr=BigInt(0),pr=BigInt(1);function Ie(t,r=""){if(typeof t!="boolean"){const n=r&&`"${r}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function se(t,r,n=""){const e=bn(t),c=t==null?void 0:t.length,o=r!==void 0;if(!e||o&&c!==r){const f=n&&`"${n}" `,b=o?` of length ${r}`:"",p=e?`length=${c}`:`type=${typeof t}`;throw new Error(f+"expected Uint8Array"+b+", got "+p)}return t}function en(t){const r=t.toString(16);return r.length&1?"0"+r:r}function qi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Mr:BigInt("0x"+t)}function Mn(t){return qi(Ae(t))}function Ye(t){return Ks(t),qi(Ae(Uint8Array.from(t).reverse()))}function Sr(t,r){return un(t.toString(16).padStart(r*2,"0"))}function zi(t,r){return Sr(t,r).reverse()}function ft(t,r,n){let e;if(typeof r=="string")try{e=un(r)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(bn(r))e=Uint8Array.from(r);else throw new Error(t+" must be hex string or Uint8Array");const c=e.length;if(typeof n=="number"&&c!==n)throw new Error(t+" of length "+n+" expected, got "+c);return e}function ai(t){return Uint8Array.from(t)}const tr=t=>typeof t=="bigint"&&Mr<=t;function Lo(t,r,n){return tr(t)&&tr(r)&&tr(n)&&r<=t&&t<n}function gr(t,r,n,e){if(!Lo(r,n,e))throw new Error("expected valid "+t+": "+n+" <= n < "+e+", got "+r)}function Fi(t){let r;for(r=0;t>Mr;t>>=pr,r+=1);return r}const He=t=>(pr<<BigInt(t))-pr;function Uo(t,r,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const e=k=>new Uint8Array(k),c=k=>Uint8Array.of(k);let o=e(t),f=e(t),b=0;const p=()=>{o.fill(1),f.fill(0),b=0},M=(...k)=>n(f,o,...k),_=(k=e(0))=>{f=M(c(0),k),o=M(),k.length!==0&&(f=M(c(1),k),o=M())},C=()=>{if(b++>=1e3)throw new Error("drbg: tried 1000 values");let k=0;const U=[];for(;k<r;){o=M();const F=o.slice();U.push(F),k+=o.length}return le(...U)};return(k,U)=>{p(),_(k);let F;for(;!(F=U(C()));)_();return p(),F}}function We(t,r,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function e(c,o,f){const b=t[c];if(f&&b===void 0)return;const p=typeof b;if(p!==o||b===null)throw new Error(`param "${c}" is invalid: expected ${o}, got ${p}`)}Object.entries(r).forEach(([c,o])=>e(c,o,!1)),Object.entries(n).forEach(([c,o])=>e(c,o,!0))}function cn(t){const r=new WeakMap;return(n,...e)=>{const c=r.get(n);if(c!==void 0)return c;const o=t(n,...e);return r.set(n,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const te=BigInt(0),Gt=BigInt(1),Me=BigInt(2),Di=BigInt(3),Ki=BigInt(4),Pi=BigInt(5),Co=BigInt(7),Zi=BigInt(8),No=BigInt(9),Vi=BigInt(16);function jt(t,r){const n=t%r;return n>=te?n:r+n}function ct(t,r,n){let e=t;for(;r-- >te;)e*=e,e%=n;return e}function ui(t,r){if(t===te)throw new Error("invert: expected non-zero number");if(r<=te)throw new Error("invert: expected positive modulus, got "+r);let n=jt(t,r),e=r,c=te,o=Gt;for(;n!==te;){const b=e/n,p=e%n,M=c-o*b;e=n,n=p,c=o,o=M}if(e!==Gt)throw new Error("invert: does not exist");return jt(c,r)}function Br(t,r,n){if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root")}function $i(t,r){const n=(t.ORDER+Gt)/Ki,e=t.pow(r,n);return Br(t,e,r),e}function qo(t,r){const n=(t.ORDER-Pi)/Zi,e=t.mul(r,Me),c=t.pow(e,n),o=t.mul(r,c),f=t.mul(t.mul(o,Me),c),b=t.mul(o,t.sub(f,t.ONE));return Br(t,b,r),b}function zo(t){const r=_e(t),n=ji(t),e=n(r,r.neg(r.ONE)),c=n(r,e),o=n(r,r.neg(e)),f=(t+Co)/Vi;return(b,p)=>{let M=b.pow(p,f),_=b.mul(M,e);const C=b.mul(M,c),A=b.mul(M,o),k=b.eql(b.sqr(_),p),U=b.eql(b.sqr(C),p);M=b.cmov(M,_,k),_=b.cmov(A,C,U);const F=b.eql(b.sqr(_),p),N=b.cmov(M,_,F);return Br(b,N,p),N}}function ji(t){if(t<Di)throw new Error("sqrt is not defined for small field");let r=t-Gt,n=0;for(;r%Me===te;)r/=Me,n++;let e=Me;const c=_e(t);for(;ci(c,e)===1;)if(e++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return $i;let o=c.pow(e,r);const f=(r+Gt)/Me;return function(p,M){if(p.is0(M))return M;if(ci(p,M)!==1)throw new Error("Cannot find square root");let _=n,C=p.mul(p.ONE,o),A=p.pow(M,r),k=p.pow(M,f);for(;!p.eql(A,p.ONE);){if(p.is0(A))return p.ZERO;let U=1,F=p.sqr(A);for(;!p.eql(F,p.ONE);)if(U++,F=p.sqr(F),U===_)throw new Error("Cannot find square root");const N=Gt<<BigInt(_-U-1),z=p.pow(C,N);_=U,C=p.sqr(z),A=p.mul(A,C),k=p.mul(k,z)}return k}}function Fo(t){return t%Ki===Di?$i:t%Zi===Pi?qo:t%Vi===No?zo(t):ji(t)}const Do=(t,r)=>(jt(t,r)&Gt)===Gt,Ko=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Po(t){const r={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Ko.reduce((e,c)=>(e[c]="function",e),r);return We(t,n),t}function Zo(t,r,n){if(n<te)throw new Error("invalid exponent, negatives unsupported");if(n===te)return t.ONE;if(n===Gt)return r;let e=t.ONE,c=r;for(;n>te;)n&Gt&&(e=t.mul(e,c)),c=t.sqr(c),n>>=Gt;return e}function Yi(t,r,n=!1){const e=new Array(r.length).fill(n?t.ZERO:void 0),c=r.reduce((f,b,p)=>t.is0(b)?f:(e[p]=f,t.mul(f,b)),t.ONE),o=t.inv(c);return r.reduceRight((f,b,p)=>t.is0(b)?f:(e[p]=t.mul(f,e[p]),t.mul(f,b)),o),e}function ci(t,r){const n=(t.ORDER-Gt)/Me,e=t.pow(r,n),c=t.eql(e,t.ONE),o=t.eql(e,t.ZERO),f=t.eql(e,t.neg(t.ONE));if(!c&&!o&&!f)throw new Error("invalid Legendre symbol result");return c?1:o?0:-1}function Gi(t,r){r!==void 0&&Ps(r);const n=r!==void 0?r:t.toString(2).length,e=Math.ceil(n/8);return{nBitLength:n,nByteLength:e}}function _e(t,r,n=!1,e={}){if(t<=te)throw new Error("invalid field: expected ORDER > 0, got "+t);let c,o,f=!1,b;if(typeof r=="object"&&r!=null){if(e.sqrt||n)throw new Error("cannot specify opts in two arguments");const A=r;A.BITS&&(c=A.BITS),A.sqrt&&(o=A.sqrt),typeof A.isLE=="boolean"&&(n=A.isLE),typeof A.modFromBytes=="boolean"&&(f=A.modFromBytes),b=A.allowedLengths}else typeof r=="number"&&(c=r),e.sqrt&&(o=e.sqrt);const{nBitLength:p,nByteLength:M}=Gi(t,c);if(M>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let _;const C=Object.freeze({ORDER:t,isLE:n,BITS:p,BYTES:M,MASK:He(p),ZERO:te,ONE:Gt,allowedLengths:b,create:A=>jt(A,t),isValid:A=>{if(typeof A!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof A);return te<=A&&A<t},is0:A=>A===te,isValidNot0:A=>!C.is0(A)&&C.isValid(A),isOdd:A=>(A&Gt)===Gt,neg:A=>jt(-A,t),eql:(A,k)=>A===k,sqr:A=>jt(A*A,t),add:(A,k)=>jt(A+k,t),sub:(A,k)=>jt(A-k,t),mul:(A,k)=>jt(A*k,t),pow:(A,k)=>Zo(C,A,k),div:(A,k)=>jt(A*ui(k,t),t),sqrN:A=>A*A,addN:(A,k)=>A+k,subN:(A,k)=>A-k,mulN:(A,k)=>A*k,inv:A=>ui(A,t),sqrt:o||(A=>(_||(_=Fo(t)),_(C,A))),toBytes:A=>n?zi(A,M):Sr(A,M),fromBytes:(A,k=!0)=>{if(b){if(!b.includes(A.length)||A.length>M)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+A.length);const F=new Uint8Array(M);F.set(A,n?0:F.length-A.length),A=F}if(A.length!==M)throw new Error("Field.fromBytes: expected "+M+" bytes, got "+A.length);let U=n?Ye(A):Mn(A);if(f&&(U=jt(U,t)),!k&&!C.isValid(U))throw new Error("invalid field element: outside of range 0..ORDER");return U},invertBatch:A=>Yi(C,A),cmov:(A,k,U)=>U?k:A});return Object.freeze(C)}function Hi(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const r=t.toString(2).length;return Math.ceil(r/8)}function Wi(t){const r=Hi(t);return r+Math.ceil(r/2)}function Vo(t,r,n=!1){const e=t.length,c=Hi(r),o=Wi(r);if(e<16||e<o||e>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+e);const f=n?Ye(t):Mn(t),b=jt(f,r-Gt)+Gt;return n?zi(b,c):Sr(b,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fe=BigInt(0),Se=BigInt(1);function fn(t,r){const n=r.negate();return t?n:r}function Be(t,r){const n=Yi(t.Fp,r.map(e=>e.Z));return r.map((e,c)=>t.fromAffine(e.toAffine(n[c])))}function Xi(t,r){if(!Number.isSafeInteger(t)||t<=0||t>r)throw new Error("invalid window size, expected [1.."+r+"], got W="+t)}function er(t,r){Xi(t,r);const n=Math.ceil(r/t)+1,e=2**(t-1),c=2**t,o=He(t),f=BigInt(t);return{windows:n,windowSize:e,mask:o,maxNumber:c,shiftBy:f}}function fi(t,r,n){const{windowSize:e,mask:c,maxNumber:o,shiftBy:f}=n;let b=Number(t&c),p=t>>f;b>e&&(b-=o,p+=Se);const M=r*e,_=M+Math.abs(b)-1,C=b===0,A=b<0,k=r%2!==0;return{nextN:p,offset:_,isZero:C,isNeg:A,isNegF:k,offsetF:M}}function $o(t,r){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,e)=>{if(!(n instanceof r))throw new Error("invalid point at index "+e)})}function jo(t,r){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,e)=>{if(!r.isValid(n))throw new Error("invalid scalar at index "+e)})}const nr=new WeakMap,Ji=new WeakMap;function rr(t){return Ji.get(t)||1}function li(t){if(t!==Fe)throw new Error("invalid wNAF")}class Qi{constructor(r,n){this.BASE=r.BASE,this.ZERO=r.ZERO,this.Fn=r.Fn,this.bits=n}_unsafeLadder(r,n,e=this.ZERO){let c=r;for(;n>Fe;)n&Se&&(e=e.add(c)),c=c.double(),n>>=Se;return e}precomputeWindow(r,n){const{windows:e,windowSize:c}=er(n,this.bits),o=[];let f=r,b=f;for(let p=0;p<e;p++){b=f,o.push(b);for(let M=1;M<c;M++)b=b.add(f),o.push(b);f=b.double()}return o}wNAF(r,n,e){if(!this.Fn.isValid(e))throw new Error("invalid scalar");let c=this.ZERO,o=this.BASE;const f=er(r,this.bits);for(let b=0;b<f.windows;b++){const{nextN:p,offset:M,isZero:_,isNeg:C,isNegF:A,offsetF:k}=fi(e,b,f);e=p,_?o=o.add(fn(A,n[k])):c=c.add(fn(C,n[M]))}return li(e),{p:c,f:o}}wNAFUnsafe(r,n,e,c=this.ZERO){const o=er(r,this.bits);for(let f=0;f<o.windows&&e!==Fe;f++){const{nextN:b,offset:p,isZero:M,isNeg:_}=fi(e,f,o);if(e=b,!M){const C=n[p];c=c.add(_?C.negate():C)}}return li(e),c}getPrecomputes(r,n,e){let c=nr.get(n);return c||(c=this.precomputeWindow(n,r),r!==1&&(typeof e=="function"&&(c=e(c)),nr.set(n,c))),c}cached(r,n,e){const c=rr(r);return this.wNAF(c,this.getPrecomputes(c,r,e),n)}unsafe(r,n,e,c){const o=rr(r);return o===1?this._unsafeLadder(r,n,c):this.wNAFUnsafe(o,this.getPrecomputes(o,r,e),n,c)}createCache(r,n){Xi(n,this.bits),Ji.set(r,n),nr.delete(r)}hasCache(r){return rr(r)!==1}}function Yo(t,r,n,e){let c=r,o=t.ZERO,f=t.ZERO;for(;n>Fe||e>Fe;)n&Se&&(o=o.add(c)),e&Se&&(f=f.add(c)),c=c.double(),n>>=Se,e>>=Se;return{p1:o,p2:f}}function ts(t,r,n,e){$o(n,t),jo(e,r);const c=n.length,o=e.length;if(c!==o)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,b=Fi(BigInt(c));let p=1;b>12?p=b-3:b>4?p=b-2:b>0&&(p=2);const M=He(p),_=new Array(Number(M)+1).fill(f),C=Math.floor((r.BITS-1)/p)*p;let A=f;for(let k=C;k>=0;k-=p){_.fill(f);for(let F=0;F<o;F++){const N=e[F],z=Number(N>>BigInt(k)&M);_[z]=_[z].add(n[F])}let U=f;for(let F=_.length-1,N=f;F>0;F--)N=N.add(_[F]),U=U.add(N);if(A=A.add(U),k!==0)for(let F=0;F<p;F++)A=A.double()}return A}function hi(t,r,n){if(r){if(r.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Po(r),r}else return _e(t,{isLE:n})}function es(t,r,n={},e){if(e===void 0&&(e=t==="edwards"),!r||typeof r!="object")throw new Error(`expected valid ${t} CURVE object`);for(const p of["p","n","h"]){const M=r[p];if(!(typeof M=="bigint"&&M>Fe))throw new Error(`CURVE.${p} must be positive bigint`)}const c=hi(r.p,n.Fp,e),o=hi(r.n,n.Fn,e),b=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const p of b)if(!c.isValid(r[p]))throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);return r=Object.freeze(Object.assign({},r)),{CURVE:r,Fp:c,Fn:o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const be=BigInt(0),Yt=BigInt(1),ir=BigInt(2),Go=BigInt(8);function Ho(t,r,n,e){const c=t.sqr(n),o=t.sqr(e),f=t.add(t.mul(r.a,c),o),b=t.add(t.ONE,t.mul(r.d,t.mul(c,o)));return t.eql(f,b)}function Wo(t,r={}){const n=es("edwards",t,r,r.FpFnLE),{Fp:e,Fn:c}=n;let o=n.CURVE;const{h:f}=o;We(r,{},{uvRatio:"function"});const b=ir<<BigInt(c.BYTES*8)-Yt,p=N=>e.create(N),M=r.uvRatio||((N,z)=>{try{return{isValid:!0,value:e.sqrt(e.div(N,z))}}catch{return{isValid:!1,value:be}}});if(!Ho(e,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function _(N,z,P=!1){const D=P?Yt:be;return gr("coordinate "+N,z,D,b),z}function C(N){if(!(N instanceof U))throw new Error("ExtendedPoint expected")}const A=cn((N,z)=>{const{X:P,Y:D,Z:W}=N,H=N.is0();z==null&&(z=H?Go:e.inv(W));const G=p(P*z),tt=p(D*z),J=e.mul(W,z);if(H)return{x:be,y:Yt};if(J!==Yt)throw new Error("invZ was invalid");return{x:G,y:tt}}),k=cn(N=>{const{a:z,d:P}=o;if(N.is0())throw new Error("bad point: ZERO");const{X:D,Y:W,Z:H,T:G}=N,tt=p(D*D),J=p(W*W),S=p(H*H),B=p(S*S),O=p(tt*z),L=p(S*p(O+J)),h=p(B+p(P*p(tt*J)));if(L!==h)throw new Error("bad point: equation left != right (1)");const i=p(D*W),u=p(H*G);if(i!==u)throw new Error("bad point: equation left != right (2)");return!0});class U{constructor(z,P,D,W){this.X=_("x",z),this.Y=_("y",P),this.Z=_("z",D,!0),this.T=_("t",W),Object.freeze(this)}static CURVE(){return o}static fromAffine(z){if(z instanceof U)throw new Error("extended point not allowed");const{x:P,y:D}=z||{};return _("x",P),_("y",D),new U(P,D,Yt,p(P*D))}static fromBytes(z,P=!1){const D=e.BYTES,{a:W,d:H}=o;z=ai(se(z,D,"point")),Ie(P,"zip215");const G=ai(z),tt=z[D-1];G[D-1]=tt&-129;const J=Ye(G),S=P?b:e.ORDER;gr("point.y",J,be,S);const B=p(J*J),O=p(B-Yt),L=p(H*B-W);let{isValid:h,value:i}=M(O,L);if(!h)throw new Error("bad point: invalid y coordinate");const u=(i&Yt)===Yt,l=(tt&128)!==0;if(!P&&i===be&&l)throw new Error("bad point: x=0 and x_0=1");return l!==u&&(i=p(-i)),U.fromAffine({x:i,y:J})}static fromHex(z,P=!1){return U.fromBytes(ft("point",z),P)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(z=8,P=!0){return F.createCache(this,z),P||this.multiply(ir),this}assertValidity(){k(this)}equals(z){C(z);const{X:P,Y:D,Z:W}=this,{X:H,Y:G,Z:tt}=z,J=p(P*tt),S=p(H*W),B=p(D*tt),O=p(G*W);return J===S&&B===O}is0(){return this.equals(U.ZERO)}negate(){return new U(p(-this.X),this.Y,this.Z,p(-this.T))}double(){const{a:z}=o,{X:P,Y:D,Z:W}=this,H=p(P*P),G=p(D*D),tt=p(ir*p(W*W)),J=p(z*H),S=P+D,B=p(p(S*S)-H-G),O=J+G,L=O-tt,h=J-G,i=p(B*L),u=p(O*h),l=p(B*h),g=p(L*O);return new U(i,u,g,l)}add(z){C(z);const{a:P,d:D}=o,{X:W,Y:H,Z:G,T:tt}=this,{X:J,Y:S,Z:B,T:O}=z,L=p(W*J),h=p(H*S),i=p(tt*D*O),u=p(G*B),l=p((W+H)*(J+S)-L-h),g=u-i,m=u+i,v=p(h-P*L),E=p(l*g),y=p(m*v),s=p(l*v),a=p(g*m);return new U(E,y,a,s)}subtract(z){return this.add(z.negate())}multiply(z){if(!c.isValidNot0(z))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:P,f:D}=F.cached(this,z,W=>Be(U,W));return Be(U,[P,D])[0]}multiplyUnsafe(z,P=U.ZERO){if(!c.isValid(z))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return z===be?U.ZERO:this.is0()||z===Yt?this:F.unsafe(this,z,D=>Be(U,D),P)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return F.unsafe(this,o.n).is0()}toAffine(z){return A(this,z)}clearCofactor(){return f===Yt?this:this.multiplyUnsafe(f)}toBytes(){const{x:z,y:P}=this.toAffine(),D=e.toBytes(P);return D[D.length-1]|=z&Yt?128:0,D}toHex(){return Ae(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(z){return Be(U,z)}static msm(z,P){return ts(U,c,z,P)}_setWindowSize(z){this.precompute(z)}toRawBytes(){return this.toBytes()}}U.BASE=new U(o.Gx,o.Gy,Yt,p(o.Gx*o.Gy)),U.ZERO=new U(be,Yt,Yt,be),U.Fp=e,U.Fn=c;const F=new Qi(U,c.BITS);return U.BASE.precompute(8),U}function Xo(t,r,n={}){if(typeof r!="function")throw new Error('"hash" function param is required');We(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e}=n,{BASE:c,Fp:o,Fn:f}=t,b=n.randomBytes||Er,p=n.adjustScalarBytes||(S=>S),M=n.domain||((S,B,O)=>{if(Ie(O,"phflag"),B.length||O)throw new Error("Contexts/pre-hash are not supported");return S});function _(S){return f.create(Ye(S))}function C(S){const B=D.secretKey;S=ft("private key",S,B);const O=ft("hashed private key",r(S),2*B),L=p(O.slice(0,B)),h=O.slice(B,2*B),i=_(L);return{head:L,prefix:h,scalar:i}}function A(S){const{head:B,prefix:O,scalar:L}=C(S),h=c.multiply(L),i=h.toBytes();return{head:B,prefix:O,scalar:L,point:h,pointBytes:i}}function k(S){return A(S).pointBytes}function U(S=Uint8Array.of(),...B){const O=le(...B);return _(r(M(O,ft("context",S),!!e)))}function F(S,B,O={}){S=ft("message",S),e&&(S=e(S));const{prefix:L,scalar:h,pointBytes:i}=A(B),u=U(O.context,L,S),l=c.multiply(u).toBytes(),g=U(O.context,l,i,S),m=f.create(u+g*h);if(!f.isValid(m))throw new Error("sign failed: invalid s");const v=le(l,f.toBytes(m));return se(v,D.signature,"result")}const N={zip215:!0};function z(S,B,O,L=N){const{context:h,zip215:i}=L,u=D.signature;S=ft("signature",S,u),B=ft("message",B),O=ft("publicKey",O,D.publicKey),i!==void 0&&Ie(i,"zip215"),e&&(B=e(B));const l=u/2,g=S.subarray(0,l),m=Ye(S.subarray(l,u));let v,E,y;try{v=t.fromBytes(O,i),E=t.fromBytes(g,i),y=c.multiplyUnsafe(m)}catch{return!1}if(!i&&v.isSmallOrder())return!1;const s=U(h,E.toBytes(),v.toBytes(),B);return E.add(v.multiplyUnsafe(s)).subtract(y).clearCofactor().is0()}const P=o.BYTES,D={secretKey:P,publicKey:P,signature:2*P,seed:P};function W(S=b(D.seed)){return se(S,D.seed,"seed")}function H(S){const B=J.randomSecretKey(S);return{secretKey:B,publicKey:k(B)}}function G(S){return bn(S)&&S.length===f.BYTES}function tt(S,B){try{return!!t.fromBytes(S,B)}catch{return!1}}const J={getExtendedPublicKey:A,randomSecretKey:W,isValidSecretKey:G,isValidPublicKey:tt,toMontgomery(S){const{y:B}=t.fromBytes(S),O=D.publicKey,L=O===32;if(!L&&O!==57)throw new Error("only defined for 25519 and 448");const h=L?o.div(Yt+B,Yt-B):o.div(B-Yt,B+Yt);return o.toBytes(h)},toMontgomerySecret(S){const B=D.secretKey;se(S,B);const O=r(S.subarray(0,B));return p(O).subarray(0,B)},randomPrivateKey:W,precompute(S=8,B=t.BASE){return B.precompute(S,!1)}};return Object.freeze({keygen:H,getPublicKey:k,sign:F,verify:z,utils:J,Point:t,lengths:D})}function Jo(t){const r={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,e=_e(r.n,t.nBitLength,!0),c={Fp:n,Fn:e,uvRatio:t.uvRatio},o={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:r,curveOpts:c,hash:t.hash,eddsaOpts:o}}function Qo(t,r){const n=r.Point;return Object.assign({},r,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function ta(t){const{CURVE:r,curveOpts:n,hash:e,eddsaOpts:c}=Jo(t),o=Wo(r,n),f=Xo(o,e,c);return Qo(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ea=BigInt(1),di=BigInt(2);BigInt(3);const na=BigInt(5),ra=BigInt(8),Ar=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),ns={p:Ar,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ra,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ia(t){const r=BigInt(10),n=BigInt(20),e=BigInt(40),c=BigInt(80),o=Ar,b=t*t%o*t%o,p=ct(b,di,o)*b%o,M=ct(p,ea,o)*t%o,_=ct(M,na,o)*M%o,C=ct(_,r,o)*_%o,A=ct(C,n,o)*C%o,k=ct(A,e,o)*A%o,U=ct(k,c,o)*k%o,F=ct(U,c,o)*k%o,N=ct(F,r,o)*_%o;return{pow_p_5_8:ct(N,di,o)*t%o,b2:b}}function sa(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const pi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function oa(t,r){const n=Ar,e=jt(r*r*r,n),c=jt(e*e*r,n),o=ia(t*c).pow_p_5_8;let f=jt(t*e*o,n);const b=jt(r*f*f,n),p=f,M=jt(f*pi,n),_=b===t,C=b===jt(-t,n),A=b===jt(-t*pi,n);return _&&(f=p),(C||A)&&(f=M),Do(f,n)&&(f=jt(-f,n)),{isValid:_||C,value:f}}const aa=_e(ns.p,{isLE:!0}),ua={...ns,Fp:aa,hash:to,adjustScalarBytes:sa,uvRatio:oa},Xe=ta(ua);var sr,gi;function ca(){if(gi)return sr;gi=1;var t=Zs().Buffer;function r(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),c=0;c<e.length;c++)e[c]=255;for(var o=0;o<n.length;o++){var f=n.charAt(o),b=f.charCodeAt(0);if(e[b]!==255)throw new TypeError(f+" is ambiguous");e[b]=o}var p=n.length,M=n.charAt(0),_=Math.log(p)/Math.log(256),C=Math.log(256)/Math.log(p);function A(F){if((Array.isArray(F)||F instanceof Uint8Array)&&(F=t.from(F)),!t.isBuffer(F))throw new TypeError("Expected Buffer");if(F.length===0)return"";for(var N=0,z=0,P=0,D=F.length;P!==D&&F[P]===0;)P++,N++;for(var W=(D-P)*C+1>>>0,H=new Uint8Array(W);P!==D;){for(var G=F[P],tt=0,J=W-1;(G!==0||tt<z)&&J!==-1;J--,tt++)G+=256*H[J]>>>0,H[J]=G%p>>>0,G=G/p>>>0;if(G!==0)throw new Error("Non-zero carry");z=tt,P++}for(var S=W-z;S!==W&&H[S]===0;)S++;for(var B=M.repeat(N);S<W;++S)B+=n.charAt(H[S]);return B}function k(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return t.alloc(0);for(var N=0,z=0,P=0;F[N]===M;)z++,N++;for(var D=(F.length-N)*_+1>>>0,W=new Uint8Array(D);N<F.length;){var H=F.charCodeAt(N);if(H>255)return;var G=e[H];if(G===255)return;for(var tt=0,J=D-1;(G!==0||tt<P)&&J!==-1;J--,tt++)G+=p*W[J]>>>0,W[J]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");P=tt,N++}for(var S=D-P;S!==D&&W[S]===0;)S++;var B=t.allocUnsafe(z+(D-S));B.fill(0,0,z);for(var O=z;S!==D;)B[O++]=W[S++];return B}function U(F){var N=k(F);if(N)return N;throw new Error("Non-base"+p+" character")}return{encode:A,decodeUnsafe:k,decode:U}}return sr=r,sr}var or,yi;function rs(){if(yi)return or;yi=1;var t=ca(),r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return or=t(r),or}var fa=rs();const fe=_i(fa);var rt={};function ye(t,r,n){return r<=t&&t<=n}function Sn(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function la(t){for(var r=String(t),n=r.length,e=0,c=[];e<n;){var o=r.charCodeAt(e);if(o<55296||o>57343)c.push(o);else if(56320<=o&&o<=57343)c.push(65533);else if(55296<=o&&o<=56319)if(e===n-1)c.push(65533);else{var f=t.charCodeAt(e+1);if(56320<=f&&f<=57343){var b=o&1023,p=f&1023;c.push(65536+(b<<10)+p),e+=1}else c.push(65533)}e+=1}return c}function ha(t){for(var r="",n=0;n<t.length;++n){var e=t[n];e<=65535?r+=String.fromCharCode(e):(e-=65536,r+=String.fromCharCode((e>>10)+55296,(e&1023)+56320))}return r}var ln=-1;function Ir(t){this.tokens=[].slice.call(t)}Ir.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ln},prepend:function(t){if(Array.isArray(t))for(var r=t;r.length;)this.tokens.unshift(r.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var r=t;r.length;)this.tokens.push(r.shift());else this.tokens.push(t)}};var De=-1;function ar(t,r){if(t)throw TypeError("Decoder error");return r||65533}var hn="utf-8";function dn(t,r){if(!(this instanceof dn))return new dn(t,r);if(t=t!==void 0?String(t).toLowerCase():hn,t!==hn)throw new Error("Encoding not supported. Only utf-8 is supported");r=Sn(r),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!r.fatal,this._ignoreBOM=!!r.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}dn.prototype={decode:function(r,n){var e;typeof r=="object"&&r instanceof ArrayBuffer?e=new Uint8Array(r):typeof r=="object"&&"buffer"in r&&r.buffer instanceof ArrayBuffer?e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):e=new Uint8Array(0),n=Sn(n),this._streaming||(this._decoder=new da({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var c=new Ir(e),o=[],f;!c.endOfStream()&&(f=this._decoder.handler(c,c.read()),f!==De);)f!==null&&(Array.isArray(f)?o.push.apply(o,f):o.push(f));if(!this._streaming){do{if(f=this._decoder.handler(c,c.read()),f===De)break;f!==null&&(Array.isArray(f)?o.push.apply(o,f):o.push(f))}while(!c.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),ha(o)}};function pn(t,r){if(!(this instanceof pn))return new pn(t,r);if(t=t!==void 0?String(t).toLowerCase():hn,t!==hn)throw new Error("Encoding not supported. Only utf-8 is supported");r=Sn(r),this._streaming=!1,this._encoder=null,this._options={fatal:!!r.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}pn.prototype={encode:function(r,n){r=r?String(r):"",n=Sn(n),this._streaming||(this._encoder=new pa(this._options)),this._streaming=!!n.stream;for(var e=[],c=new Ir(la(r)),o;!c.endOfStream()&&(o=this._encoder.handler(c,c.read()),o!==De);)Array.isArray(o)?e.push.apply(e,o):e.push(o);if(!this._streaming){for(;o=this._encoder.handler(c,c.read()),o!==De;)Array.isArray(o)?e.push.apply(e,o):e.push(o);this._encoder=null}return new Uint8Array(e)}};function da(t){var r=t.fatal,n=0,e=0,c=0,o=128,f=191;this.handler=function(b,p){if(p===ln&&c!==0)return c=0,ar(r);if(p===ln)return De;if(c===0){if(ye(p,0,127))return p;if(ye(p,194,223))c=1,n=p-192;else if(ye(p,224,239))p===224&&(o=160),p===237&&(f=159),c=2,n=p-224;else if(ye(p,240,244))p===240&&(o=144),p===244&&(f=143),c=3,n=p-240;else return ar(r);return n=n<<6*c,null}if(!ye(p,o,f))return n=c=e=0,o=128,f=191,b.prepend(p),ar(r);if(o=128,f=191,e+=1,n+=p-128<<6*(c-e),e!==c)return null;var M=n;return n=c=e=0,M}}function pa(t){t.fatal,this.handler=function(r,n){if(n===ln)return De;if(ye(n,0,127))return n;var e,c;ye(n,128,2047)?(e=1,c=192):ye(n,2048,65535)?(e=2,c=224):ye(n,65536,1114111)&&(e=3,c=240);for(var o=[(n>>6*e)+c];e>0;){var f=n>>6*(e-1);o.push(128|f&63),e-=1}return o}}const ga=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:dn,TextEncoder:pn},Symbol.toStringTag,{value:"Module"})),ya=ki(ga);var mi;function ma(){if(mi)return rt;mi=1;var t=rt&&rt.__createBinding||(Object.create?(function(S,B,O,L){L===void 0&&(L=O),Object.defineProperty(S,L,{enumerable:!0,get:function(){return B[O]}})}):(function(S,B,O,L){L===void 0&&(L=O),S[L]=B[O]})),r=rt&&rt.__setModuleDefault||(Object.create?(function(S,B){Object.defineProperty(S,"default",{enumerable:!0,value:B})}):function(S,B){S.default=B}),n=rt&&rt.__decorate||function(S,B,O,L){var h=arguments.length,i=h<3?B:L===null?L=Object.getOwnPropertyDescriptor(B,O):L,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(S,B,O,L);else for(var l=S.length-1;l>=0;l--)(u=S[l])&&(i=(h<3?u(i):h>3?u(B,O,i):u(B,O))||i);return h>3&&i&&Object.defineProperty(B,O,i),i},e=rt&&rt.__importStar||function(S){if(S&&S.__esModule)return S;var B={};if(S!=null)for(var O in S)O!=="default"&&Object.hasOwnProperty.call(S,O)&&t(B,S,O);return r(B,S),B},c=rt&&rt.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(rt,"__esModule",{value:!0}),rt.deserializeUnchecked=rt.deserialize=rt.serialize=rt.BinaryReader=rt.BinaryWriter=rt.BorshError=rt.baseDecode=rt.baseEncode=void 0;const o=c(Ri()),f=c(rs()),b=e(ya),p=typeof TextDecoder!="function"?b.TextDecoder:TextDecoder,M=new p("utf-8",{fatal:!0});function _(S){return typeof S=="string"&&(S=Buffer.from(S,"utf8")),f.default.encode(Buffer.from(S))}rt.baseEncode=_;function C(S){return Buffer.from(f.default.decode(S))}rt.baseDecode=C;const A=1024;class k extends Error{constructor(B){super(B),this.fieldPath=[],this.originalMessage=B}addToFieldPath(B){this.fieldPath.splice(0,0,B),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}rt.BorshError=k;class U{constructor(){this.buf=Buffer.alloc(A),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(A)]))}writeU8(B){this.maybeResize(),this.buf.writeUInt8(B,this.length),this.length+=1}writeU16(B){this.maybeResize(),this.buf.writeUInt16LE(B,this.length),this.length+=2}writeU32(B){this.maybeResize(),this.buf.writeUInt32LE(B,this.length),this.length+=4}writeU64(B){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(B).toArray("le",8)))}writeU128(B){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(B).toArray("le",16)))}writeU256(B){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(B).toArray("le",32)))}writeU512(B){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(B).toArray("le",64)))}writeBuffer(B){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),B,Buffer.alloc(A)]),this.length+=B.length}writeString(B){this.maybeResize();const O=Buffer.from(B,"utf8");this.writeU32(O.length),this.writeBuffer(O)}writeFixedArray(B){this.writeBuffer(Buffer.from(B))}writeArray(B,O){this.maybeResize(),this.writeU32(B.length);for(const L of B)this.maybeResize(),O(L)}toArray(){return this.buf.subarray(0,this.length)}}rt.BinaryWriter=U;function F(S,B,O){const L=O.value;O.value=function(...h){try{return L.apply(this,h)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new k("Reached the end of buffer when deserializing")}throw i}}}class N{constructor(B){this.buf=B,this.offset=0}readU8(){const B=this.buf.readUInt8(this.offset);return this.offset+=1,B}readU16(){const B=this.buf.readUInt16LE(this.offset);return this.offset+=2,B}readU32(){const B=this.buf.readUInt32LE(this.offset);return this.offset+=4,B}readU64(){const B=this.readBuffer(8);return new o.default(B,"le")}readU128(){const B=this.readBuffer(16);return new o.default(B,"le")}readU256(){const B=this.readBuffer(32);return new o.default(B,"le")}readU512(){const B=this.readBuffer(64);return new o.default(B,"le")}readBuffer(B){if(this.offset+B>this.buf.length)throw new k(`Expected buffer length ${B} isn't within bounds`);const O=this.buf.slice(this.offset,this.offset+B);return this.offset+=B,O}readString(){const B=this.readU32(),O=this.readBuffer(B);try{return M.decode(O)}catch(L){throw new k(`Error decoding UTF-8 string: ${L}`)}}readFixedArray(B){return new Uint8Array(this.readBuffer(B))}readArray(B){const O=this.readU32(),L=Array();for(let h=0;h<O;++h)L.push(B());return L}}n([F],N.prototype,"readU8",null),n([F],N.prototype,"readU16",null),n([F],N.prototype,"readU32",null),n([F],N.prototype,"readU64",null),n([F],N.prototype,"readU128",null),n([F],N.prototype,"readU256",null),n([F],N.prototype,"readU512",null),n([F],N.prototype,"readString",null),n([F],N.prototype,"readFixedArray",null),n([F],N.prototype,"readArray",null),rt.BinaryReader=N;function z(S){return S.charAt(0).toUpperCase()+S.slice(1)}function P(S,B,O,L,h){try{if(typeof L=="string")h[`write${z(L)}`](O);else if(L instanceof Array)if(typeof L[0]=="number"){if(O.length!==L[0])throw new k(`Expecting byte array of length ${L[0]}, but got ${O.length} bytes`);h.writeFixedArray(O)}else if(L.length===2&&typeof L[1]=="number"){if(O.length!==L[1])throw new k(`Expecting byte array of length ${L[1]}, but got ${O.length} bytes`);for(let i=0;i<L[1];i++)P(S,null,O[i],L[0],h)}else h.writeArray(O,i=>{P(S,B,i,L[0],h)});else if(L.kind!==void 0)switch(L.kind){case"option":{O==null?h.writeU8(0):(h.writeU8(1),P(S,B,O,L.type,h));break}case"map":{h.writeU32(O.size),O.forEach((i,u)=>{P(S,B,u,L.key,h),P(S,B,i,L.value,h)});break}default:throw new k(`FieldType ${L} unrecognized`)}else D(S,O,h)}catch(i){throw i instanceof k&&i.addToFieldPath(B),i}}function D(S,B,O){if(typeof B.borshSerialize=="function"){B.borshSerialize(O);return}const L=S.get(B.constructor);if(!L)throw new k(`Class ${B.constructor.name} is missing in schema`);if(L.kind==="struct")L.fields.map(([h,i])=>{P(S,h,B[h],i,O)});else if(L.kind==="enum"){const h=B[L.field];for(let i=0;i<L.values.length;++i){const[u,l]=L.values[i];if(u===h){O.writeU8(i),P(S,u,B[u],l,O);break}}}else throw new k(`Unexpected schema kind: ${L.kind} for ${B.constructor.name}`)}function W(S,B,O=U){const L=new O;return D(S,B,L),L.toArray()}rt.serialize=W;function H(S,B,O,L){try{if(typeof O=="string")return L[`read${z(O)}`]();if(O instanceof Array){if(typeof O[0]=="number")return L.readFixedArray(O[0]);if(typeof O[1]=="number"){const h=[];for(let i=0;i<O[1];i++)h.push(H(S,null,O[0],L));return h}else return L.readArray(()=>H(S,B,O[0],L))}if(O.kind==="option")return L.readU8()?H(S,B,O.type,L):void 0;if(O.kind==="map"){let h=new Map;const i=L.readU32();for(let u=0;u<i;u++){const l=H(S,B,O.key,L),g=H(S,B,O.value,L);h.set(l,g)}return h}return G(S,O,L)}catch(h){throw h instanceof k&&h.addToFieldPath(B),h}}function G(S,B,O){if(typeof B.borshDeserialize=="function")return B.borshDeserialize(O);const L=S.get(B);if(!L)throw new k(`Class ${B.name} is missing in schema`);if(L.kind==="struct"){const h={};for(const[i,u]of S.get(B).fields)h[i]=H(S,i,u,O);return new B(h)}if(L.kind==="enum"){const h=O.readU8();if(h>=L.values.length)throw new k(`Enum index: ${h} is out of range`);const[i,u]=L.values[h],l=H(S,i,u,O);return new B({[i]:l})}throw new k(`Unexpected schema kind: ${L.kind} for ${B.constructor.name}`)}function tt(S,B,O,L=N){const h=new L(O),i=G(S,B,h);if(h.offset<O.length)throw new k(`Unexpected ${O.length-h.offset} bytes after deserialized data`);return i}rt.deserialize=tt;function J(S,B,O,L=N){const h=new L(O);return G(S,B,h)}return rt.deserializeUnchecked=J,rt}var ur=ma(),T={},wi;function wa(){if(wi)return T;wi=1,Object.defineProperty(T,"__esModule",{value:!0}),T.s16=T.s8=T.nu64be=T.u48be=T.u40be=T.u32be=T.u24be=T.u16be=T.nu64=T.u48=T.u40=T.u32=T.u24=T.u16=T.u8=T.offset=T.greedy=T.Constant=T.UTF8=T.CString=T.Blob=T.Boolean=T.BitField=T.BitStructure=T.VariantLayout=T.Union=T.UnionLayoutDiscriminator=T.UnionDiscriminator=T.Structure=T.Sequence=T.DoubleBE=T.Double=T.FloatBE=T.Float=T.NearInt64BE=T.NearInt64=T.NearUInt64BE=T.NearUInt64=T.IntBE=T.Int=T.UIntBE=T.UInt=T.OffsetLayout=T.GreedyCount=T.ExternalLayout=T.bindConstructorLayout=T.nameWithProperty=T.Layout=T.uint8ArrayToBuffer=T.checkUint8Array=void 0,T.constant=T.utf8=T.cstr=T.blob=T.unionLayoutDiscriminator=T.union=T.seq=T.bits=T.struct=T.f64be=T.f64=T.f32be=T.f32=T.ns64be=T.s48be=T.s40be=T.s32be=T.s24be=T.s16be=T.ns64=T.s48=T.s40=T.s32=T.s24=void 0;const t=Vs();function r(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}T.checkUint8Array=r;function n(s){return r(s),t.Buffer.from(s.buffer,s.byteOffset,s.length)}T.uint8ArrayToBuffer=n;let e=class{constructor(a,d){if(!Number.isInteger(a))throw new TypeError("span must be an integer");this.span=a,this.property=d}makeDestinationObject(){return{}}getSpan(a,d){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(a){const d=Object.create(this.constructor.prototype);return Object.assign(d,this),d.property=a,d}fromArray(a){}};T.Layout=e;function c(s,a){return a.property?s+"["+a.property+"]":s}T.nameWithProperty=c;function o(s,a){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(a&&a instanceof e))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(a,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=a,a.boundConstructor_=s,a.makeDestinationObject=(()=>new s),Object.defineProperty(s.prototype,"encode",{value(d,w){return a.encode(this,d,w)},writable:!0}),Object.defineProperty(s,"decode",{value(d,w){return a.decode(d,w)},writable:!0})}T.bindConstructorLayout=o;class f extends e{isCount(){throw new Error("ExternalLayout is abstract")}}T.ExternalLayout=f;class b extends f{constructor(a=1,d){if(!Number.isInteger(a)||0>=a)throw new TypeError("elementSpan must be a (positive) integer");super(-1,d),this.elementSpan=a}isCount(){return!0}decode(a,d=0){r(a);const w=a.length-d;return Math.floor(w/this.elementSpan)}encode(a,d,w){return 0}}T.GreedyCount=b;class p extends f{constructor(a,d=0,w){if(!(a instanceof e))throw new TypeError("layout must be a Layout");if(!Number.isInteger(d))throw new TypeError("offset must be integer or undefined");super(a.span,w||a.property),this.layout=a,this.offset=d}isCount(){return this.layout instanceof M||this.layout instanceof _}decode(a,d=0){return this.layout.decode(a,d+this.offset)}encode(a,d,w=0){return this.layout.encode(a,d,w+this.offset)}}T.OffsetLayout=p;class M extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return n(a).readUIntLE(d,this.span)}encode(a,d,w=0){return n(d).writeUIntLE(a,w,this.span),this.span}}T.UInt=M;class _ extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return n(a).readUIntBE(d,this.span)}encode(a,d,w=0){return n(d).writeUIntBE(a,w,this.span),this.span}}T.UIntBE=_;class C extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return n(a).readIntLE(d,this.span)}encode(a,d,w=0){return n(d).writeIntLE(a,w,this.span),this.span}}T.Int=C;class A extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return n(a).readIntBE(d,this.span)}encode(a,d,w=0){return n(d).writeIntBE(a,w,this.span),this.span}}T.IntBE=A;const k=Math.pow(2,32);function U(s){const a=Math.floor(s/k),d=s-a*k;return{hi32:a,lo32:d}}function F(s,a){return s*k+a}class N extends e{constructor(a){super(8,a)}decode(a,d=0){const w=n(a),I=w.readUInt32LE(d),q=w.readUInt32LE(d+4);return F(q,I)}encode(a,d,w=0){const I=U(a),q=n(d);return q.writeUInt32LE(I.lo32,w),q.writeUInt32LE(I.hi32,w+4),8}}T.NearUInt64=N;class z extends e{constructor(a){super(8,a)}decode(a,d=0){const w=n(a),I=w.readUInt32BE(d),q=w.readUInt32BE(d+4);return F(I,q)}encode(a,d,w=0){const I=U(a),q=n(d);return q.writeUInt32BE(I.hi32,w),q.writeUInt32BE(I.lo32,w+4),8}}T.NearUInt64BE=z;class P extends e{constructor(a){super(8,a)}decode(a,d=0){const w=n(a),I=w.readUInt32LE(d),q=w.readInt32LE(d+4);return F(q,I)}encode(a,d,w=0){const I=U(a),q=n(d);return q.writeUInt32LE(I.lo32,w),q.writeInt32LE(I.hi32,w+4),8}}T.NearInt64=P;class D extends e{constructor(a){super(8,a)}decode(a,d=0){const w=n(a),I=w.readInt32BE(d),q=w.readUInt32BE(d+4);return F(I,q)}encode(a,d,w=0){const I=U(a),q=n(d);return q.writeInt32BE(I.hi32,w),q.writeUInt32BE(I.lo32,w+4),8}}T.NearInt64BE=D;class W extends e{constructor(a){super(4,a)}decode(a,d=0){return n(a).readFloatLE(d)}encode(a,d,w=0){return n(d).writeFloatLE(a,w),4}}T.Float=W;class H extends e{constructor(a){super(4,a)}decode(a,d=0){return n(a).readFloatBE(d)}encode(a,d,w=0){return n(d).writeFloatBE(a,w),4}}T.FloatBE=H;class G extends e{constructor(a){super(8,a)}decode(a,d=0){return n(a).readDoubleLE(d)}encode(a,d,w=0){return n(d).writeDoubleLE(a,w),8}}T.Double=G;class tt extends e{constructor(a){super(8,a)}decode(a,d=0){return n(a).readDoubleBE(d)}encode(a,d,w=0){return n(d).writeDoubleBE(a,w),8}}T.DoubleBE=tt;class J extends e{constructor(a,d,w){if(!(a instanceof e))throw new TypeError("elementLayout must be a Layout");if(!(d instanceof f&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let I=-1;!(d instanceof f)&&0<a.span&&(I=d*a.span),super(I,w),this.elementLayout=a,this.count=d}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0,I=this.count;if(I instanceof f&&(I=I.decode(a,d)),0<this.elementLayout.span)w=I*this.elementLayout.span;else{let q=0;for(;q<I;)w+=this.elementLayout.getSpan(a,d+w),++q}return w}decode(a,d=0){const w=[];let I=0,q=this.count;for(q instanceof f&&(q=q.decode(a,d));I<q;)w.push(this.elementLayout.decode(a,d)),d+=this.elementLayout.getSpan(a,d),I+=1;return w}encode(a,d,w=0){const I=this.elementLayout,q=a.reduce((V,Y)=>V+I.encode(Y,d,w+V),0);return this.count instanceof f&&this.count.encode(a.length,d,w),q}}T.Sequence=J;class S extends e{constructor(a,d,w){if(!(Array.isArray(a)&&a.reduce((q,V)=>q&&V instanceof e,!0)))throw new TypeError("fields must be array of Layout instances");typeof d=="boolean"&&w===void 0&&(w=d,d=void 0);for(const q of a)if(0>q.span&&q.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let I=-1;try{I=a.reduce((q,V)=>q+V.getSpan(),0)}catch{}super(I,d),this.fields=a,this.decodePrefixes=!!w}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;try{w=this.fields.reduce((I,q)=>{const V=q.getSpan(a,d);return d+=V,I+V},0)}catch{throw new RangeError("indeterminate span")}return w}decode(a,d=0){r(a);const w=this.makeDestinationObject();for(const I of this.fields)if(I.property!==void 0&&(w[I.property]=I.decode(a,d)),d+=I.getSpan(a,d),this.decodePrefixes&&a.length===d)break;return w}encode(a,d,w=0){const I=w;let q=0,V=0;for(const Y of this.fields){let it=Y.span;if(V=0<it?it:0,Y.property!==void 0){const st=a[Y.property];st!==void 0&&(V=Y.encode(st,d,w),0>it&&(it=Y.getSpan(d,w)))}q=w,w+=it}return q+V-I}fromArray(a){const d=this.makeDestinationObject();for(const w of this.fields)w.property!==void 0&&0<a.length&&(d[w.property]=a.shift());return d}layoutFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}offsetOf(a){if(typeof a!="string")throw new TypeError("property must be string");let d=0;for(const w of this.fields){if(w.property===a)return d;0>w.span?d=-1:0<=d&&(d+=w.span)}}}T.Structure=S;class B{constructor(a){this.property=a}decode(a,d){throw new Error("UnionDiscriminator is abstract")}encode(a,d,w){throw new Error("UnionDiscriminator is abstract")}}T.UnionDiscriminator=B;class O extends B{constructor(a,d){if(!(a instanceof f&&a.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(d||a.property||"variant"),this.layout=a}decode(a,d){return this.layout.decode(a,d)}encode(a,d,w){return this.layout.encode(a,d,w)}}T.UnionLayoutDiscriminator=O;class L extends e{constructor(a,d,w){let I;if(a instanceof M||a instanceof _)I=new O(new p(a));else if(a instanceof f&&a.isCount())I=new O(a);else if(a instanceof B)I=a;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(d===void 0&&(d=null),!(d===null||d instanceof e))throw new TypeError("defaultLayout must be null or a Layout");if(d!==null){if(0>d.span)throw new Error("defaultLayout must have constant span");d.property===void 0&&(d=d.replicate("content"))}let q=-1;d&&(q=d.span,0<=q&&(a instanceof M||a instanceof _)&&(q+=I.layout.span)),super(q,w),this.discriminator=I,this.usesPrefixDiscriminator=a instanceof M||a instanceof _,this.defaultLayout=d,this.registry={};let V=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(Y){return V(Y)},this.configGetSourceVariant=function(Y){V=Y.bind(this)}}getSpan(a,d=0){if(0<=this.span)return this.span;const w=this.getVariant(a,d);if(!w)throw new Error("unable to determine span for unrecognized variant");return w.getSpan(a,d)}defaultGetSourceVariant(a){if(Object.prototype.hasOwnProperty.call(a,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(a,this.defaultLayout.property))return;const d=this.registry[a[this.discriminator.property]];if(d&&(!d.layout||d.property&&Object.prototype.hasOwnProperty.call(a,d.property)))return d}else for(const d in this.registry){const w=this.registry[d];if(w.property&&Object.prototype.hasOwnProperty.call(a,w.property))return w}throw new Error("unable to infer src variant")}decode(a,d=0){let w;const I=this.discriminator,q=I.decode(a,d),V=this.registry[q];if(V===void 0){const Y=this.defaultLayout;let it=0;this.usesPrefixDiscriminator&&(it=I.layout.span),w=this.makeDestinationObject(),w[I.property]=q,w[Y.property]=Y.decode(a,d+it)}else w=V.decode(a,d);return w}encode(a,d,w=0){const I=this.getSourceVariant(a);if(I===void 0){const q=this.discriminator,V=this.defaultLayout;let Y=0;return this.usesPrefixDiscriminator&&(Y=q.layout.span),q.encode(a[q.property],d,w),Y+V.encode(a[V.property],d,w+Y)}return I.encode(a,d,w)}addVariant(a,d,w){const I=new h(this,a,d,w);return this.registry[a]=I,I}getVariant(a,d=0){let w;return a instanceof Uint8Array?w=this.discriminator.decode(a,d):w=a,this.registry[w]}}T.Union=L;class h extends e{constructor(a,d,w,I){if(!(a instanceof L))throw new TypeError("union must be a Union");if(!Number.isInteger(d)||0>d)throw new TypeError("variant must be a (non-negative) integer");if(typeof w=="string"&&I===void 0&&(I=w,w=null),w){if(!(w instanceof e))throw new TypeError("layout must be a Layout");if(a.defaultLayout!==null&&0<=w.span&&w.span>a.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof I!="string")throw new TypeError("variant must have a String property")}let q=a.span;0>a.span&&(q=w?w.span:0,0<=q&&a.usesPrefixDiscriminator&&(q+=a.discriminator.layout.span)),super(q,I),this.union=a,this.variant=d,this.layout=w||null}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;this.union.usesPrefixDiscriminator&&(w=this.union.discriminator.layout.span);let I=0;return this.layout&&(I=this.layout.getSpan(a,d+w)),w+I}decode(a,d=0){const w=this.makeDestinationObject();if(this!==this.union.getVariant(a,d))throw new Error("variant mismatch");let I=0;return this.union.usesPrefixDiscriminator&&(I=this.union.discriminator.layout.span),this.layout?w[this.property]=this.layout.decode(a,d+I):this.property?w[this.property]=!0:this.union.usesPrefixDiscriminator&&(w[this.union.discriminator.property]=this.variant),w}encode(a,d,w=0){let I=0;if(this.union.usesPrefixDiscriminator&&(I=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(a,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,d,w);let q=I;if(this.layout&&(this.layout.encode(a[this.property],d,w+I),q+=this.layout.getSpan(d,w+I),0<=this.union.span&&q>this.union.span))throw new Error("encoded variant overruns containing union");return q}fromArray(a){if(this.layout)return this.layout.fromArray(a)}}T.VariantLayout=h;function i(s){return 0>s&&(s+=4294967296),s}class u extends e{constructor(a,d,w){if(!(a instanceof M||a instanceof _))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof d=="string"&&w===void 0&&(w=d,d=!1),4<a.span)throw new RangeError("word cannot exceed 32 bits");super(a.span,w),this.word=a,this.msb=!!d,this.fields=[];let I=0;this._packedSetValue=function(q){return I=i(q),this},this._packedGetValue=function(){return I}}decode(a,d=0){const w=this.makeDestinationObject(),I=this.word.decode(a,d);this._packedSetValue(I);for(const q of this.fields)q.property!==void 0&&(w[q.property]=q.decode(a));return w}encode(a,d,w=0){const I=this.word.decode(d,w);this._packedSetValue(I);for(const q of this.fields)if(q.property!==void 0){const V=a[q.property];V!==void 0&&q.encode(V)}return this.word.encode(this._packedGetValue(),d,w)}addField(a,d){const w=new l(this,a,d);return this.fields.push(w),w}addBoolean(a){const d=new g(this,a);return this.fields.push(d),d}fieldFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}}T.BitStructure=u;class l{constructor(a,d,w){if(!(a instanceof u))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(d)||0>=d)throw new TypeError("bits must be positive integer");const I=8*a.span,q=a.fields.reduce((V,Y)=>V+Y.bits,0);if(d+q>I)throw new Error("bits too long for span remainder ("+(I-q)+" of "+I+" remain)");this.container=a,this.bits=d,this.valueMask=(1<<d)-1,d===32&&(this.valueMask=4294967295),this.start=q,this.container.msb&&(this.start=I-q-d),this.wordMask=i(this.valueMask<<this.start),this.property=w}decode(a,d){const w=this.container._packedGetValue();return i(w&this.wordMask)>>>this.start}encode(a){if(typeof a!="number"||!Number.isInteger(a)||a!==i(a&this.valueMask))throw new TypeError(c("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const d=this.container._packedGetValue(),w=i(a<<this.start);this.container._packedSetValue(i(d&~this.wordMask)|w)}}T.BitField=l;class g extends l{constructor(a,d){super(a,1,d)}decode(a,d){return!!super.decode(a,d)}encode(a){typeof a=="boolean"&&(a=+a),super.encode(a)}}T.Boolean=g;class m extends e{constructor(a,d){if(!(a instanceof f&&a.isCount()||Number.isInteger(a)&&0<=a))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let w=-1;a instanceof f||(w=a),super(w,d),this.length=a}getSpan(a,d){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),w}decode(a,d=0){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),n(a).slice(d,d+w)}encode(a,d,w){let I=this.length;if(this.length instanceof f&&(I=a.length),!(a instanceof Uint8Array&&I===a.length))throw new TypeError(c("Blob.encode",this)+" requires (length "+I+") Uint8Array as src");if(w+I>d.length)throw new RangeError("encoding overruns Uint8Array");const q=n(a);return n(d).write(q.toString("hex"),w,I,"hex"),this.length instanceof f&&this.length.encode(I,d,w),I}}T.Blob=m;class v extends e{constructor(a){super(-1,a)}getSpan(a,d=0){r(a);let w=d;for(;w<a.length&&a[w]!==0;)w+=1;return 1+w-d}decode(a,d=0){const w=this.getSpan(a,d);return n(a).slice(d,d+w-1).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const I=t.Buffer.from(a,"utf8"),q=I.length;if(w+q>d.length)throw new RangeError("encoding overruns Buffer");const V=n(d);return I.copy(V,w),V[w+q]=0,q+1}}T.CString=v;class E extends e{constructor(a,d){if(typeof a=="string"&&d===void 0&&(d=a,a=void 0),a===void 0)a=-1;else if(!Number.isInteger(a))throw new TypeError("maxSpan must be an integer");super(-1,d),this.maxSpan=a}getSpan(a,d=0){return r(a),a.length-d}decode(a,d=0){const w=this.getSpan(a,d);if(0<=this.maxSpan&&this.maxSpan<w)throw new RangeError("text length exceeds maxSpan");return n(a).slice(d,d+w).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const I=t.Buffer.from(a,"utf8"),q=I.length;if(0<=this.maxSpan&&this.maxSpan<q)throw new RangeError("text length exceeds maxSpan");if(w+q>d.length)throw new RangeError("encoding overruns Buffer");return I.copy(n(d),w),q}}T.UTF8=E;class y extends e{constructor(a,d){super(0,d),this.value=a}decode(a,d){return this.value}encode(a,d,w){return 0}}return T.Constant=y,T.greedy=((s,a)=>new b(s,a)),T.offset=((s,a,d)=>new p(s,a,d)),T.u8=(s=>new M(1,s)),T.u16=(s=>new M(2,s)),T.u24=(s=>new M(3,s)),T.u32=(s=>new M(4,s)),T.u40=(s=>new M(5,s)),T.u48=(s=>new M(6,s)),T.nu64=(s=>new N(s)),T.u16be=(s=>new _(2,s)),T.u24be=(s=>new _(3,s)),T.u32be=(s=>new _(4,s)),T.u40be=(s=>new _(5,s)),T.u48be=(s=>new _(6,s)),T.nu64be=(s=>new z(s)),T.s8=(s=>new C(1,s)),T.s16=(s=>new C(2,s)),T.s24=(s=>new C(3,s)),T.s32=(s=>new C(4,s)),T.s40=(s=>new C(5,s)),T.s48=(s=>new C(6,s)),T.ns64=(s=>new P(s)),T.s16be=(s=>new A(2,s)),T.s24be=(s=>new A(3,s)),T.s32be=(s=>new A(4,s)),T.s40be=(s=>new A(5,s)),T.s48be=(s=>new A(6,s)),T.ns64be=(s=>new D(s)),T.f32=(s=>new W(s)),T.f32be=(s=>new H(s)),T.f64=(s=>new G(s)),T.f64be=(s=>new tt(s)),T.struct=((s,a,d)=>new S(s,a,d)),T.bits=((s,a,d)=>new u(s,a,d)),T.seq=((s,a,d)=>new J(s,a,d)),T.union=((s,a,d)=>new L(s,a,d)),T.unionLayoutDiscriminator=((s,a)=>new O(s,a)),T.blob=((s,a)=>new m(s,a)),T.cstr=(s=>new v(s)),T.utf8=((s,a)=>new E(s,a)),T.constant=((s,a)=>new y(s,a)),T}var x=wa(),va=8078e3,ba=8078001,xa=8078004,Ea=8078005,Ma=8078006,Sa=8078011;function is(t){return Array.isArray(t)?"%5B"+t.map(is).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Ba([t,r]){return`${t}=${is(r)}`}function Aa(t){const r=Object.entries(t).map(Ba).join("&");return btoa(r)}function Ia(t,r={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(r).length&&(n+=` '${Aa(r)}'`),`${n}\``}}var qe=class extends Error{constructor(...[r,n]){let e,c;if(n){const{cause:f,...b}=n;f&&(c={cause:f}),Object.keys(b).length>0&&(e=b)}const o=Ia(r,e);super(o,c);Yn(this,"cause",this.cause);Yn(this,"context");this.context={__code:r,...e},this.name="SolanaError"}};function _a(t,r){return"fixedSize"in r?r.fixedSize:r.getSizeFromValue(t)}function ka(t){return Object.freeze({...t,encode:r=>{const n=new Uint8Array(_a(r,t));return t.write(r,n,0),n}})}function Ra(t){return Object.freeze({...t,decode:(r,n=0)=>t.read(r,n)[0]})}function Oe(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Ta(t,r){if(Oe(t)!==Oe(r))throw new qe(xa);if(Oe(t)&&Oe(r)&&t.fixedSize!==r.fixedSize)throw new qe(Ea,{decoderFixedSize:r.fixedSize,encoderFixedSize:t.fixedSize});if(!Oe(t)&&!Oe(r)&&t.maxSize!==r.maxSize)throw new qe(Ma,{decoderMaxSize:r.maxSize,encoderMaxSize:t.maxSize});return{...r,...t,decode:r.decode,encode:t.encode,read:r.read,write:t.write}}function Oa(t,r,n=0){if(r.length-n<=0)throw new qe(va,{codecDescription:t})}function La(t,r,n,e=0){const c=n.length-e;if(c<r)throw new qe(ba,{bytesLength:c,codecDescription:t,expected:r})}function Ua(t,r,n,e){if(e<r||e>n)throw new qe(Sa,{codecDescription:t,max:n,min:r,value:e})}function ss(t){return(t==null?void 0:t.endian)!==1}function Ca(t){return ka({fixedSize:t.size,write(r,n,e){t.range&&Ua(t.name,t.range[0],t.range[1],r);const c=new ArrayBuffer(t.size);return t.set(new DataView(c),r,ss(t.config)),n.set(new Uint8Array(c),e),e+t.size}})}function Na(t){return Ra({fixedSize:t.size,read(r,n=0){Oa(t.name,r,n),La(t.name,t.size,r,n);const e=new DataView(qa(r,n,t.size));return[t.get(e,ss(t.config)),n+t.size]}})}function qa(t,r,n){const e=t.byteOffset+(r??0),c=n??t.byteLength;return t.buffer.slice(e,e+c)}var za=(t={})=>Ca({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(r,n,e)=>r.setBigUint64(0,BigInt(n),e),size:8}),Fa=(t={})=>Na({config:t,get:(r,n)=>r.getBigUint64(0,n),name:"u64",size:8}),Da=(t={})=>Ta(za(t),Fa(t));class Ka extends TypeError{constructor(r,n){let e;const{message:c,explanation:o,...f}=r,{path:b}=r,p=b.length===0?c:`At path: ${b.join(".")} -- ${c}`;super(o??p),o!=null&&(this.cause=p),Object.assign(this,f),this.name=this.constructor.name,this.failures=()=>e??(e=[r,...n()])}}function Pa(t){return Je(t)&&typeof t[Symbol.iterator]=="function"}function Je(t){return typeof t=="object"&&t!=null}function gn(t){return Je(t)&&!Array.isArray(t)}function oe(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Za(t){const{done:r,value:n}=t.next();return r?void 0:n}function Va(t,r,n,e){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:c,branch:o}=r,{type:f}=n,{refinement:b,message:p=`Expected a value of type \`${f}\`${b?` with refinement \`${b}\``:""}, but received: \`${oe(e)}\``}=t;return{value:e,type:f,refinement:b,key:c[c.length-1],path:c,branch:o,...t,message:p}}function*vi(t,r,n,e){Pa(t)||(t=[t]);for(const c of t){const o=Va(c,r,n,e);o&&(yield o)}}function*_r(t,r,n={}){const{path:e=[],branch:c=[t],coerce:o=!1,mask:f=!1}=n,b={path:e,branch:c,mask:f};o&&(t=r.coercer(t,b));let p="valid";for(const M of r.validator(t,b))M.explanation=n.message,p="not_valid",yield[M,void 0];for(let[M,_,C]of r.entries(t,b)){const A=_r(_,C,{path:M===void 0?e:[...e,M],branch:M===void 0?c:[...c,_],coerce:o,mask:f,message:n.message});for(const k of A)k[0]?(p=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):o&&(_=k[1],M===void 0?t=_:t instanceof Map?t.set(M,_):t instanceof Set?t.add(_):Je(t)&&(_!==void 0||M in t)&&(t[M]=_))}if(p!=="not_valid")for(const M of r.refiner(t,b))M.explanation=n.message,p="not_refined",yield[M,void 0];p==="valid"&&(yield[void 0,t])}let pe=class{constructor(r){const{type:n,schema:e,validator:c,refiner:o,coercer:f=p=>p,entries:b=function*(){}}=r;this.type=n,this.schema=e,this.entries=b,this.coercer=f,c?this.validator=(p,M)=>{const _=c(p,M);return vi(_,M,this,p)}:this.validator=()=>[],o?this.refiner=(p,M)=>{const _=o(p,M);return vi(_,M,this,p)}:this.refiner=()=>[]}assert(r,n){return $a(r,this,n)}create(r,n){return Ge(r,this,n)}is(r){return os(r,this)}mask(r,n){return ja(r,this,n)}validate(r,n={}){return Qe(r,this,n)}};function $a(t,r,n){const e=Qe(t,r,{message:n});if(e[0])throw e[0]}function Ge(t,r,n){const e=Qe(t,r,{coerce:!0,message:n});if(e[0])throw e[0];return e[1]}function ja(t,r,n){const e=Qe(t,r,{coerce:!0,mask:!0,message:n});if(e[0])throw e[0];return e[1]}function os(t,r){return!Qe(t,r)[0]}function Qe(t,r,n={}){const e=_r(t,r,n),c=Za(e);return c[0]?[new Ka(c[0],function*(){for(const f of e)f[0]&&(yield f[0])}),void 0]:[void 0,c[1]]}function ke(t,r){return new pe({type:t,schema:null,validator:r})}function Ya(){return ke("any",()=>!0)}function $(t){return new pe({type:"array",schema:t,*entries(r){if(t&&Array.isArray(r))for(const[n,e]of r.entries())yield[n,e,t]},coercer(r){return Array.isArray(r)?r.slice():r},validator(r){return Array.isArray(r)||`Expected an array value, but received: ${oe(r)}`}})}function de(){return ke("boolean",t=>typeof t=="boolean")}function kr(t){return ke("instance",r=>r instanceof t||`Expected a \`${t.name}\` instance, but received: ${oe(r)}`)}function ut(t){const r=oe(t),n=typeof t;return new pe({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(e){return e===t||`Expected the literal \`${r}\`, but received: ${oe(e)}`}})}function Ga(){return ke("never",()=>!1)}function j(t){return new pe({...t,validator:(r,n)=>r===null||t.validator(r,n),refiner:(r,n)=>r===null||t.refiner(r,n)})}function R(){return ke("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${oe(t)}`)}function X(t){return new pe({...t,validator:(r,n)=>r===void 0||t.validator(r,n),refiner:(r,n)=>r===void 0||t.refiner(r,n)})}function as(t,r){return new pe({type:"record",schema:null,*entries(n){if(Je(n))for(const e in n){const c=n[e];yield[e,e,t],yield[e,c,r]}},validator(n){return gn(n)||`Expected an object, but received: ${oe(n)}`},coercer(n){return gn(n)?{...n}:n}})}function Z(){return ke("string",t=>typeof t=="string"||`Expected a string, but received: ${oe(t)}`)}function Rr(t){const r=Ga();return new pe({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const e=Math.max(t.length,n.length);for(let c=0;c<e;c++)yield[c,n[c],t[c]||r]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${oe(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function K(t){const r=Object.keys(t);return new pe({type:"type",schema:t,*entries(n){if(Je(n))for(const e of r)yield[e,n[e],t[e]]},validator(n){return gn(n)||`Expected an object, but received: ${oe(n)}`},coercer(n){return gn(n)?{...n}:n}})}function Qt(t){const r=t.map(n=>n.type).join(" | ");return new pe({type:"union",schema:null,coercer(n,e){for(const c of t){const[o,f]=c.validate(n,{coerce:!0,mask:e.mask});if(!o)return f}return n},validator(n,e){const c=[];for(const o of t){const[...f]=_r(n,o,e),[b]=f;if(b[0])for(const[p]of f)p&&c.push(p);else return[]}return[`Expected the value to satisfy a union of \`${r}\`, but received: ${oe(n)}`,...c]}})}function Pe(){return ke("unknown",()=>!0)}function tn(t,r,n){return new pe({...t,coercer:(e,c)=>os(e,r)?t.coercer(n(e,c),c):t.coercer(e,c)})}const us=ki(Mo);var cr,bi;function Ha(){if(bi)return cr;bi=1;const t=us.v4;return cr=function(n,e,c,o){if(typeof n!="string")throw new TypeError(n+" must be a string");o=o||{};const f=typeof o.version=="number"?o.version:2;if(f!==1&&f!==2)throw new TypeError(f+" must be 1 or 2");const b={method:n};if(f===2&&(b.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");b.params=e}if(typeof c>"u"){const p=typeof o.generator=="function"?o.generator:function(){return t()};b.id=p(b,o)}else f===2&&c===null?o.notificationIdNull&&(b.id=null):b.id=c;return b},cr}var fr,xi;function Wa(){if(xi)return fr;xi=1;const t=us.v4,r=Ha(),n=function(e,c){if(!(this instanceof n))return new n(e,c);c||(c={}),this.options={reviver:typeof c.reviver<"u"?c.reviver:null,replacer:typeof c.replacer<"u"?c.replacer:null,generator:typeof c.generator<"u"?c.generator:function(){return t()},version:typeof c.version<"u"?c.version:2,notificationIdNull:typeof c.notificationIdNull=="boolean"?c.notificationIdNull:!1},this.callServer=e};return fr=n,n.prototype.request=function(e,c,o,f){const b=this;let p=null;const M=Array.isArray(e)&&typeof c=="function";if(this.options.version===1&&M)throw new TypeError("JSON-RPC 1.0 does not support batching");if(M||!M&&e&&typeof e=="object"&&typeof c=="function")f=c,p=e;else{typeof o=="function"&&(f=o,o=void 0);const A=typeof f=="function";try{p=r(e,c,o,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(A){f(k);return}throw k}if(!A)return p}let C;try{C=JSON.stringify(p,this.options.replacer)}catch(A){f(A);return}return this.callServer(C,function(A,k){b._parseResponse(A,k,f)}),p},n.prototype._parseResponse=function(e,c,o){if(e){o(e);return}if(!c){o();return}let f;try{f=JSON.parse(c,this.options.reviver)}catch(b){o(b);return}if(o.length===3)if(Array.isArray(f)){const b=function(M){return typeof M.error<"u"},p=function(M){return!b(M)};o(null,f.filter(b),f.filter(p));return}else{o(null,f.error,f.result);return}o(null,f)},fr}Wa();var lr={exports:{}},Ei;function Xa(){return Ei||(Ei=1,(function(t){var r=Object.prototype.hasOwnProperty,n="~";function e(){}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(n=!1));function c(p,M,_){this.fn=p,this.context=M,this.once=_||!1}function o(p,M,_,C,A){if(typeof _!="function")throw new TypeError("The listener must be a function");var k=new c(_,C||p,A),U=n?n+M:M;return p._events[U]?p._events[U].fn?p._events[U]=[p._events[U],k]:p._events[U].push(k):(p._events[U]=k,p._eventsCount++),p}function f(p,M){--p._eventsCount===0?p._events=new e:delete p._events[M]}function b(){this._events=new e,this._eventsCount=0}b.prototype.eventNames=function(){var M=[],_,C;if(this._eventsCount===0)return M;for(C in _=this._events)r.call(_,C)&&M.push(n?C.slice(1):C);return Object.getOwnPropertySymbols?M.concat(Object.getOwnPropertySymbols(_)):M},b.prototype.listeners=function(M){var _=n?n+M:M,C=this._events[_];if(!C)return[];if(C.fn)return[C.fn];for(var A=0,k=C.length,U=new Array(k);A<k;A++)U[A]=C[A].fn;return U},b.prototype.listenerCount=function(M){var _=n?n+M:M,C=this._events[_];return C?C.fn?1:C.length:0},b.prototype.emit=function(M,_,C,A,k,U){var F=n?n+M:M;if(!this._events[F])return!1;var N=this._events[F],z=arguments.length,P,D;if(N.fn){switch(N.once&&this.removeListener(M,N.fn,void 0,!0),z){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,_),!0;case 3:return N.fn.call(N.context,_,C),!0;case 4:return N.fn.call(N.context,_,C,A),!0;case 5:return N.fn.call(N.context,_,C,A,k),!0;case 6:return N.fn.call(N.context,_,C,A,k,U),!0}for(D=1,P=new Array(z-1);D<z;D++)P[D-1]=arguments[D];N.fn.apply(N.context,P)}else{var W=N.length,H;for(D=0;D<W;D++)switch(N[D].once&&this.removeListener(M,N[D].fn,void 0,!0),z){case 1:N[D].fn.call(N[D].context);break;case 2:N[D].fn.call(N[D].context,_);break;case 3:N[D].fn.call(N[D].context,_,C);break;case 4:N[D].fn.call(N[D].context,_,C,A);break;default:if(!P)for(H=1,P=new Array(z-1);H<z;H++)P[H-1]=arguments[H];N[D].fn.apply(N[D].context,P)}}return!0},b.prototype.on=function(M,_,C){return o(this,M,_,C,!1)},b.prototype.once=function(M,_,C){return o(this,M,_,C,!0)},b.prototype.removeListener=function(M,_,C,A){var k=n?n+M:M;if(!this._events[k])return this;if(!_)return f(this,k),this;var U=this._events[k];if(U.fn)U.fn===_&&(!A||U.once)&&(!C||U.context===C)&&f(this,k);else{for(var F=0,N=[],z=U.length;F<z;F++)(U[F].fn!==_||A&&!U[F].once||C&&U[F].context!==C)&&N.push(U[F]);N.length?this._events[k]=N.length===1?N[0]:N:f(this,k)}return this},b.prototype.removeAllListeners=function(M){var _;return M?(_=n?n+M:M,this._events[_]&&f(this,_)):(this._events=new e,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prefixed=n,b.EventEmitter=b,t.exports=b})(lr)),lr.exports}Xa();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mi=(t,r)=>(t+(t>=0?r:-r)/cs)/r;function Ja(t,r,n){const[[e,c],[o,f]]=r,b=Mi(f*t,n),p=Mi(-c*t,n);let M=t-b*e-p*o,_=-b*c-p*f;const C=M<we,A=_<we;C&&(M=-M),A&&(_=-_);const k=He(Math.ceil(Fi(n)/2))+ze;if(M<we||M>=k||_<we||_>=k)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:C,k1:M,k2neg:A,k2:_}}function yr(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function hr(t,r){const n={};for(let e of Object.keys(r))n[e]=t[e]===void 0?r[e]:t[e];return Ie(n.lowS,"lowS"),Ie(n.prehash,"prehash"),n.format!==void 0&&yr(n.format),n}class Qa extends Error{constructor(r=""){super(r)}}const ge={Err:Qa,_tlv:{encode:(t,r)=>{const{Err:n}=ge;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(r.length&1)throw new n("tlv.encode: unpadded data");const e=r.length/2,c=en(e);if(c.length/2&128)throw new n("tlv.encode: long form length too big");const o=e>127?en(c.length/2|128):"";return en(t)+o+c+r},decode(t,r){const{Err:n}=ge;let e=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[e++]!==t)throw new n("tlv.decode: wrong tlv");const c=r[e++],o=!!(c&128);let f=0;if(!o)f=c;else{const p=c&127;if(!p)throw new n("tlv.decode(long): indefinite length not supported");if(p>4)throw new n("tlv.decode(long): byte length is too big");const M=r.subarray(e,e+p);if(M.length!==p)throw new n("tlv.decode: length bytes not complete");if(M[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const _ of M)f=f<<8|_;if(e+=p,f<128)throw new n("tlv.decode(long): not minimal encoding")}const b=r.subarray(e,e+f);if(b.length!==f)throw new n("tlv.decode: wrong value length");return{v:b,l:r.subarray(e+f)}}},_int:{encode(t){const{Err:r}=ge;if(t<we)throw new r("integer: negative integers are not allowed");let n=en(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new r("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:r}=ge;if(t[0]&128)throw new r("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new r("invalid signature integer: unnecessary leading zero");return Mn(t)}},toSig(t){const{Err:r,_int:n,_tlv:e}=ge,c=ft("signature",t),{v:o,l:f}=e.decode(48,c);if(f.length)throw new r("invalid signature: left bytes after parsing");const{v:b,l:p}=e.decode(2,o),{v:M,l:_}=e.decode(2,p);if(_.length)throw new r("invalid signature: left bytes after parsing");return{r:n.decode(b),s:n.decode(M)}},hexFromSig(t){const{_tlv:r,_int:n}=ge,e=r.encode(2,n.encode(t.r)),c=r.encode(2,n.encode(t.s)),o=e+c;return r.encode(48,o)}},we=BigInt(0),ze=BigInt(1),cs=BigInt(2),nn=BigInt(3),tu=BigInt(4);function Ue(t,r){const{BYTES:n}=t;let e;if(typeof r=="bigint")e=r;else{let c=ft("private key",r);try{e=t.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof r}`)}}if(!t.isValidNot0(e))throw new Error("invalid private key: out of range [1..N-1]");return e}function eu(t,r={}){const n=es("weierstrass",t,r),{Fp:e,Fn:c}=n;let o=n.CURVE;const{h:f,n:b}=o;We(r,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:p}=r;if(p&&(!e.is0(o.a)||typeof p.beta!="bigint"||!Array.isArray(p.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const M=ls(e,c);function _(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function C(L,h,i){const{x:u,y:l}=h.toAffine(),g=e.toBytes(u);if(Ie(i,"isCompressed"),i){_();const m=!e.isOdd(l);return le(fs(m),g)}else return le(Uint8Array.of(4),g,e.toBytes(l))}function A(L){se(L,void 0,"Point");const{publicKey:h,publicKeyUncompressed:i}=M,u=L.length,l=L[0],g=L.subarray(1);if(u===h&&(l===2||l===3)){const m=e.fromBytes(g);if(!e.isValid(m))throw new Error("bad point: is not on curve, wrong x");const v=F(m);let E;try{E=e.sqrt(v)}catch(a){const d=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+d)}_();const y=e.isOdd(E);return(l&1)===1!==y&&(E=e.neg(E)),{x:m,y:E}}else if(u===i&&l===4){const m=e.BYTES,v=e.fromBytes(g.subarray(0,m)),E=e.fromBytes(g.subarray(m,m*2));if(!N(v,E))throw new Error("bad point: is not on curve");return{x:v,y:E}}else throw new Error(`bad point: got length ${u}, expected compressed=${h} or uncompressed=${i}`)}const k=r.toBytes||C,U=r.fromBytes||A;function F(L){const h=e.sqr(L),i=e.mul(h,L);return e.add(e.add(i,e.mul(L,o.a)),o.b)}function N(L,h){const i=e.sqr(h),u=F(L);return e.eql(i,u)}if(!N(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const z=e.mul(e.pow(o.a,nn),tu),P=e.mul(e.sqr(o.b),BigInt(27));if(e.is0(e.add(z,P)))throw new Error("bad curve params: a or b");function D(L,h,i=!1){if(!e.isValid(h)||i&&e.is0(h))throw new Error(`bad point coordinate ${L}`);return h}function W(L){if(!(L instanceof S))throw new Error("ProjectivePoint expected")}function H(L){if(!p||!p.basises)throw new Error("no endo");return Ja(L,p.basises,c.ORDER)}const G=cn((L,h)=>{const{X:i,Y:u,Z:l}=L;if(e.eql(l,e.ONE))return{x:i,y:u};const g=L.is0();h==null&&(h=g?e.ONE:e.inv(l));const m=e.mul(i,h),v=e.mul(u,h),E=e.mul(l,h);if(g)return{x:e.ZERO,y:e.ZERO};if(!e.eql(E,e.ONE))throw new Error("invZ was invalid");return{x:m,y:v}}),tt=cn(L=>{if(L.is0()){if(r.allowInfinityPoint&&!e.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:h,y:i}=L.toAffine();if(!e.isValid(h)||!e.isValid(i))throw new Error("bad point: x or y not field elements");if(!N(h,i))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function J(L,h,i,u,l){return i=new S(e.mul(i.X,L),i.Y,i.Z),h=fn(u,h),i=fn(l,i),h.add(i)}class S{constructor(h,i,u){this.X=D("x",h),this.Y=D("y",i,!0),this.Z=D("z",u),Object.freeze(this)}static CURVE(){return o}static fromAffine(h){const{x:i,y:u}=h||{};if(!h||!e.isValid(i)||!e.isValid(u))throw new Error("invalid affine point");if(h instanceof S)throw new Error("projective point not allowed");return e.is0(i)&&e.is0(u)?S.ZERO:new S(i,u,e.ONE)}static fromBytes(h){const i=S.fromAffine(U(se(h,void 0,"point")));return i.assertValidity(),i}static fromHex(h){return S.fromBytes(ft("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,i=!0){return O.createCache(this,h),i||this.multiply(nn),this}assertValidity(){tt(this)}hasEvenY(){const{y:h}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(h)}equals(h){W(h);const{X:i,Y:u,Z:l}=this,{X:g,Y:m,Z:v}=h,E=e.eql(e.mul(i,v),e.mul(g,l)),y=e.eql(e.mul(u,v),e.mul(m,l));return E&&y}negate(){return new S(this.X,e.neg(this.Y),this.Z)}double(){const{a:h,b:i}=o,u=e.mul(i,nn),{X:l,Y:g,Z:m}=this;let v=e.ZERO,E=e.ZERO,y=e.ZERO,s=e.mul(l,l),a=e.mul(g,g),d=e.mul(m,m),w=e.mul(l,g);return w=e.add(w,w),y=e.mul(l,m),y=e.add(y,y),v=e.mul(h,y),E=e.mul(u,d),E=e.add(v,E),v=e.sub(a,E),E=e.add(a,E),E=e.mul(v,E),v=e.mul(w,v),y=e.mul(u,y),d=e.mul(h,d),w=e.sub(s,d),w=e.mul(h,w),w=e.add(w,y),y=e.add(s,s),s=e.add(y,s),s=e.add(s,d),s=e.mul(s,w),E=e.add(E,s),d=e.mul(g,m),d=e.add(d,d),s=e.mul(d,w),v=e.sub(v,s),y=e.mul(d,a),y=e.add(y,y),y=e.add(y,y),new S(v,E,y)}add(h){W(h);const{X:i,Y:u,Z:l}=this,{X:g,Y:m,Z:v}=h;let E=e.ZERO,y=e.ZERO,s=e.ZERO;const a=o.a,d=e.mul(o.b,nn);let w=e.mul(i,g),I=e.mul(u,m),q=e.mul(l,v),V=e.add(i,u),Y=e.add(g,m);V=e.mul(V,Y),Y=e.add(w,I),V=e.sub(V,Y),Y=e.add(i,l);let it=e.add(g,v);return Y=e.mul(Y,it),it=e.add(w,q),Y=e.sub(Y,it),it=e.add(u,l),E=e.add(m,v),it=e.mul(it,E),E=e.add(I,q),it=e.sub(it,E),s=e.mul(a,Y),E=e.mul(d,q),s=e.add(E,s),E=e.sub(I,s),s=e.add(I,s),y=e.mul(E,s),I=e.add(w,w),I=e.add(I,w),q=e.mul(a,q),Y=e.mul(d,Y),I=e.add(I,q),q=e.sub(w,q),q=e.mul(a,q),Y=e.add(Y,q),w=e.mul(I,Y),y=e.add(y,w),w=e.mul(it,Y),E=e.mul(V,E),E=e.sub(E,w),w=e.mul(V,I),s=e.mul(it,s),s=e.add(s,w),new S(E,y,s)}subtract(h){return this.add(h.negate())}is0(){return this.equals(S.ZERO)}multiply(h){const{endo:i}=r;if(!c.isValidNot0(h))throw new Error("invalid scalar: out of range");let u,l;const g=m=>O.cached(this,m,v=>Be(S,v));if(i){const{k1neg:m,k1:v,k2neg:E,k2:y}=H(h),{p:s,f:a}=g(v),{p:d,f:w}=g(y);l=a.add(w),u=J(i.beta,s,d,m,E)}else{const{p:m,f:v}=g(h);u=m,l=v}return Be(S,[u,l])[0]}multiplyUnsafe(h){const{endo:i}=r,u=this;if(!c.isValid(h))throw new Error("invalid scalar: out of range");if(h===we||u.is0())return S.ZERO;if(h===ze)return u;if(O.hasCache(this))return this.multiply(h);if(i){const{k1neg:l,k1:g,k2neg:m,k2:v}=H(h),{p1:E,p2:y}=Yo(S,u,g,v);return J(i.beta,E,y,l,m)}else return O.unsafe(u,h)}multiplyAndAddUnsafe(h,i,u){const l=this.multiplyUnsafe(i).add(h.multiplyUnsafe(u));return l.is0()?void 0:l}toAffine(h){return G(this,h)}isTorsionFree(){const{isTorsionFree:h}=r;return f===ze?!0:h?h(S,this):O.unsafe(this,b).is0()}clearCofactor(){const{clearCofactor:h}=r;return f===ze?this:h?h(S,this):this.multiplyUnsafe(f)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}toBytes(h=!0){return Ie(h,"isCompressed"),this.assertValidity(),k(S,this,h)}toHex(h=!0){return Ae(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return Be(S,h)}static msm(h,i){return ts(S,c,h,i)}static fromPrivateKey(h){return S.BASE.multiply(Ue(c,h))}}S.BASE=new S(o.Gx,o.Gy,e.ONE),S.ZERO=new S(e.ZERO,e.ONE,e.ZERO),S.Fp=e,S.Fn=c;const B=c.BITS,O=new Qi(S,r.endo?Math.ceil(B/2):B);return S.BASE.precompute(8),S}function fs(t){return Uint8Array.of(t?2:3)}function ls(t,r){return{secretKey:r.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*r.BYTES}}function nu(t,r={}){const{Fn:n}=t,e=r.randomBytes||Er,c=Object.assign(ls(t.Fp,n),{seed:Wi(n.ORDER)});function o(k){try{return!!Ue(n,k)}catch{return!1}}function f(k,U){const{publicKey:F,publicKeyUncompressed:N}=c;try{const z=k.length;return U===!0&&z!==F||U===!1&&z!==N?!1:!!t.fromBytes(k)}catch{return!1}}function b(k=e(c.seed)){return Vo(se(k,c.seed,"seed"),n.ORDER)}function p(k,U=!0){return t.BASE.multiply(Ue(n,k)).toBytes(U)}function M(k){const U=b(k);return{secretKey:U,publicKey:p(U)}}function _(k){if(typeof k=="bigint")return!1;if(k instanceof t)return!0;const{secretKey:U,publicKey:F,publicKeyUncompressed:N}=c;if(n.allowedLengths||U===F)return;const z=ft("key",k).length;return z===F||z===N}function C(k,U,F=!0){if(_(k)===!0)throw new Error("first arg must be private key");if(_(U)===!1)throw new Error("second arg must be public key");const N=Ue(n,k);return t.fromHex(U).multiply(N).toBytes(F)}return Object.freeze({getPublicKey:p,getSharedSecret:C,keygen:M,Point:t,utils:{isValidSecretKey:o,isValidPublicKey:f,randomSecretKey:b,isValidPrivateKey:o,randomPrivateKey:b,normPrivateKeyToScalar:k=>Ue(n,k),precompute(k=8,U=t.BASE){return U.precompute(k,!1)}},lengths:c})}function ru(t,r,n={}){$s(r),We(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const e=n.randomBytes||Er,c=n.hmac||((i,...u)=>eo(r,i,le(...u))),{Fp:o,Fn:f}=t,{ORDER:b,BITS:p}=f,{keygen:M,getPublicKey:_,getSharedSecret:C,utils:A,lengths:k}=nu(t,n),U={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},F="compact";function N(i){const u=b>>ze;return i>u}function z(i,u){if(!f.isValidNot0(u))throw new Error(`invalid signature ${i}: out of range 1..Point.Fn.ORDER`);return u}function P(i,u){yr(u);const l=k.signature,g=u==="compact"?l:u==="recovered"?l+1:void 0;return se(i,g,`${u} signature`)}class D{constructor(u,l,g){this.r=z("r",u),this.s=z("s",l),g!=null&&(this.recovery=g),Object.freeze(this)}static fromBytes(u,l=F){P(u,l);let g;if(l==="der"){const{r:y,s}=ge.toSig(se(u));return new D(y,s)}l==="recovered"&&(g=u[0],l="compact",u=u.subarray(1));const m=f.BYTES,v=u.subarray(0,m),E=u.subarray(m,m*2);return new D(f.fromBytes(v),f.fromBytes(E),g)}static fromHex(u,l){return this.fromBytes(un(u),l)}addRecoveryBit(u){return new D(this.r,this.s,u)}recoverPublicKey(u){const l=o.ORDER,{r:g,s:m,recovery:v}=this;if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");if(b*cs<l&&v>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=v===2||v===3?g+b:g;if(!o.isValid(y))throw new Error("recovery id 2 or 3 invalid");const s=o.toBytes(y),a=t.fromBytes(le(fs((v&1)===0),s)),d=f.inv(y),w=H(ft("msgHash",u)),I=f.create(-w*d),q=f.create(m*d),V=t.BASE.multiplyUnsafe(I).add(a.multiplyUnsafe(q));if(V.is0())throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return N(this.s)}toBytes(u=F){if(yr(u),u==="der")return un(ge.hexFromSig(this));const l=f.toBytes(this.r),g=f.toBytes(this.s);if(u==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return le(Uint8Array.of(this.recovery),l,g)}return le(l,g)}toHex(u){return Ae(this.toBytes(u))}assertValidity(){}static fromCompact(u){return D.fromBytes(ft("sig",u),"compact")}static fromDER(u){return D.fromBytes(ft("sig",u),"der")}normalizeS(){return this.hasHighS()?new D(this.r,f.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ae(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ae(this.toBytes("compact"))}}const W=n.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const l=Mn(u),g=u.length*8-p;return g>0?l>>BigInt(g):l},H=n.bits2int_modN||function(u){return f.create(W(u))},G=He(p);function tt(i){return gr("num < 2^"+p,i,we,G),f.toBytes(i)}function J(i,u){return se(i,void 0,"message"),u?se(r(i),void 0,"prehashed message"):i}function S(i,u,l){if(["recovered","canonical"].some(I=>I in l))throw new Error("sign() legacy options not supported");const{lowS:g,prehash:m,extraEntropy:v}=hr(l,U);i=J(i,m);const E=H(i),y=Ue(f,u),s=[tt(y),tt(E)];if(v!=null&&v!==!1){const I=v===!0?e(k.secretKey):v;s.push(ft("extraEntropy",I))}const a=le(...s),d=E;function w(I){const q=W(I);if(!f.isValidNot0(q))return;const V=f.inv(q),Y=t.BASE.multiply(q).toAffine(),it=f.create(Y.x);if(it===we)return;const st=f.create(V*f.create(d+it*y));if(st===we)return;let at=(Y.x===it?0:2)|Number(Y.y&ze),Ve=st;return g&&N(st)&&(Ve=f.neg(st),at^=1),new D(it,Ve,at)}return{seed:a,k2sig:w}}function B(i,u,l={}){i=ft("message",i);const{seed:g,k2sig:m}=S(i,u,l);return Uo(r.outputLen,f.BYTES,c)(g,m)}function O(i){let u;const l=typeof i=="string"||bn(i),g=!l&&i!==null&&typeof i=="object"&&typeof i.r=="bigint"&&typeof i.s=="bigint";if(!l&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(g)u=new D(i.r,i.s);else if(l){try{u=D.fromBytes(ft("sig",i),"der")}catch(m){if(!(m instanceof ge.Err))throw m}if(!u)try{u=D.fromBytes(ft("sig",i),"compact")}catch{return!1}}return u||!1}function L(i,u,l,g={}){const{lowS:m,prehash:v,format:E}=hr(g,U);if(l=ft("publicKey",l),u=J(ft("message",u),v),"strict"in g)throw new Error("options.strict was renamed to lowS");const y=E===void 0?O(i):D.fromBytes(ft("sig",i),E);if(y===!1)return!1;try{const s=t.fromBytes(l);if(m&&y.hasHighS())return!1;const{r:a,s:d}=y,w=H(u),I=f.inv(d),q=f.create(w*I),V=f.create(a*I),Y=t.BASE.multiplyUnsafe(q).add(s.multiplyUnsafe(V));return Y.is0()?!1:f.create(Y.x)===a}catch{return!1}}function h(i,u,l={}){const{prehash:g}=hr(l,U);return u=J(u,g),D.fromBytes(i,"recovered").recoverPublicKey(u).toBytes()}return Object.freeze({keygen:M,getPublicKey:_,getSharedSecret:C,utils:A,lengths:k,Point:t,sign:B,verify:L,recoverPublicKey:h,Signature:D,hash:r})}function iu(t){const r={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let e=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(f=>Math.ceil(f/2)))):void 0;const c=_e(r.n,{BITS:t.nBitLength,allowedLengths:e,modFromBytes:t.wrapPrivateKey}),o={Fp:n,Fn:c,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:r,curveOpts:o}}function su(t){const{CURVE:r,curveOpts:n}=iu(t),e={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:r,curveOpts:n,hash:t.hash,ecdsaOpts:e}}function ou(t,r){const n=r.Point;return Object.assign({},r,{ProjectivePoint:n,CURVE:Object.assign({},t,Gi(n.Fn.ORDER,n.Fn.BITS))})}function au(t){const{CURVE:r,curveOpts:n,hash:e,ecdsaOpts:c}=su(t),o=eu(r,n),f=ru(o,e,c);return ou(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uu(t,r){const n=e=>au({...t,hash:e});return{...n(r),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},cu={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Si=BigInt(2);function fu(t){const r=Tr.p,n=BigInt(3),e=BigInt(6),c=BigInt(11),o=BigInt(22),f=BigInt(23),b=BigInt(44),p=BigInt(88),M=t*t*t%r,_=M*M*t%r,C=ct(_,n,r)*_%r,A=ct(C,n,r)*_%r,k=ct(A,Si,r)*M%r,U=ct(k,c,r)*k%r,F=ct(U,o,r)*U%r,N=ct(F,b,r)*F%r,z=ct(N,p,r)*N%r,P=ct(z,b,r)*F%r,D=ct(P,n,r)*_%r,W=ct(D,f,r)*U%r,H=ct(W,e,r)*M%r,G=ct(H,Si,r);if(!mr.eql(mr.sqr(G),t))throw new Error("Cannot find square root");return G}const mr=_e(Tr.p,{sqrt:fu}),lu=uu({...Tr,Fp:mr,lowS:!0,endo:cu},no);Xe.utils.randomPrivateKey;Xe.getPublicKey;function Bi(t){try{return Xe.ExtendedPoint.fromHex(t),!0}catch{return!1}}const hu=(t,r)=>Xe.sign(t,r.slice(0,32));Xe.verify;const hs=t=>nt.Buffer.isBuffer(t)?t:t instanceof Uint8Array?nt.Buffer.from(t.buffer,t.byteOffset,t.byteLength):nt.Buffer.from(t);class du{constructor(r){Object.assign(this,r)}encode(){return nt.Buffer.from(ur.serialize(on,this))}static decode(r){return ur.deserialize(on,this,r)}static decodeUnchecked(r){return ur.deserializeUnchecked(on,this,r)}}const on=new Map;var ds;const pu=32,Ee=32;function gu(t){return t._bn!==void 0}let Ai=1;class Q extends du{constructor(r){if(super({}),this._bn=void 0,gu(r))this._bn=r._bn;else{if(typeof r=="string"){const n=fe.decode(r);if(n.length!=Ee)throw new Error("Invalid public key input");this._bn=new ri(n)}else this._bn=new ri(r);if(this._bn.byteLength()>Ee)throw new Error("Invalid public key input")}}static unique(){const r=new Q(Ai);return Ai+=1,new Q(r.toBuffer())}equals(r){return this._bn.eq(r._bn)}toBase58(){return fe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const r=this.toBuffer();return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}toBuffer(){const r=this._bn.toArrayLike(nt.Buffer);if(r.length===Ee)return r;const n=nt.Buffer.alloc(32);return r.copy(n,32-r.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(r,n,e){const c=nt.Buffer.concat([r.toBuffer(),nt.Buffer.from(n),e.toBuffer()]),o=ei(c);return new Q(o)}static createProgramAddressSync(r,n){let e=nt.Buffer.alloc(0);r.forEach(function(o){if(o.length>pu)throw new TypeError("Max seed length exceeded");e=nt.Buffer.concat([e,hs(o)])}),e=nt.Buffer.concat([e,n.toBuffer(),nt.Buffer.from("ProgramDerivedAddress")]);const c=ei(e);if(Bi(c))throw new Error("Invalid seeds, address must fall off the curve");return new Q(c)}static async createProgramAddress(r,n){return this.createProgramAddressSync(r,n)}static findProgramAddressSync(r,n){let e=255,c;for(;e!=0;){try{const o=r.concat(nt.Buffer.from([e]));c=this.createProgramAddressSync(o,n)}catch(o){if(o instanceof TypeError)throw o;e--;continue}return[c,e]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(r,n){return this.findProgramAddressSync(r,n)}static isOnCurve(r){const n=new Q(r);return Bi(n.toBytes())}}ds=Q;Q.default=new ds("11111111111111111111111111111111");on.set(Q,{kind:"struct",fields:[["_bn","u256"]]});new Q("BPFLoader1111111111111111111111111111111111");const an=1232,Or=127,wr=64;class yn{constructor(r,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=r,this.accountKeysFromLookups=n}keySegments(){const r=[this.staticAccountKeys];return this.accountKeysFromLookups&&(r.push(this.accountKeysFromLookups.writable),r.push(this.accountKeysFromLookups.readonly)),r}get(r){for(const n of this.keySegments()){if(r<n.length)return n[r];r-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(r){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach((o,f)=>{e.set(o.toBase58(),f)});const c=o=>{const f=e.get(o.toBase58());if(f===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return f};return r.map(o=>({programIdIndex:c(o.programId),accountKeyIndexes:o.keys.map(f=>c(f.pubkey)),data:o.data}))}}const et=(t="publicKey")=>x.blob(32,t),yu=(t="signature")=>x.blob(64,t),Ce=(t="string")=>{const r=x.struct([x.u32("length"),x.u32("lengthPadding"),x.blob(x.offset(x.u32(),-8),"chars")],t),n=r.decode.bind(r),e=r.encode.bind(r),c=r;return c.decode=(o,f)=>n(o,f).chars.toString(),c.encode=(o,f,b)=>{const p={chars:nt.Buffer.from(o,"utf8")};return e(p,f,b)},c.alloc=o=>x.u32().span+x.u32().span+nt.Buffer.from(o,"utf8").length,c},mu=(t="authorized")=>x.struct([et("staker"),et("withdrawer")],t),wu=(t="lockup")=>x.struct([x.ns64("unixTimestamp"),x.ns64("epoch"),et("custodian")],t),vu=(t="voteInit")=>x.struct([et("nodePubkey"),et("authorizedVoter"),et("authorizedWithdrawer"),x.u8("commission")],t),bu=(t="voteAuthorizeWithSeedArgs")=>x.struct([x.u32("voteAuthorizationType"),et("currentAuthorityDerivedKeyOwnerPubkey"),Ce("currentAuthorityDerivedKeySeed"),et("newAuthorized")],t);function ee(t){let r=0,n=0;for(;;){let e=t.shift();if(r|=(e&127)<<n*7,n+=1,(e&128)===0)break}return r}function ne(t,r){let n=r;for(;;){let e=n&127;if(n>>=7,n==0){t.push(e);break}else e|=128,t.push(e)}}function he(t,r){if(!t)throw new Error(r||"Assertion failed")}class Bn{constructor(r,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=r,this.keyMetaMap=n}static compile(r,n){const e=new Map,c=f=>{const b=f.toBase58();let p=e.get(b);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},e.set(b,p)),p},o=c(n);o.isSigner=!0,o.isWritable=!0;for(const f of r){c(f.programId).isInvoked=!0;for(const b of f.keys){const p=c(b.pubkey);p.isSigner||(p.isSigner=b.isSigner),p.isWritable||(p.isWritable=b.isWritable)}}return new Bn(n,e)}getMessageComponents(){const r=[...this.keyMetaMap.entries()];he(r.length<=256,"Max static account keys length exceeded");const n=r.filter(([,p])=>p.isSigner&&p.isWritable),e=r.filter(([,p])=>p.isSigner&&!p.isWritable),c=r.filter(([,p])=>!p.isSigner&&p.isWritable),o=r.filter(([,p])=>!p.isSigner&&!p.isWritable),f={numRequiredSignatures:n.length+e.length,numReadonlySignedAccounts:e.length,numReadonlyUnsignedAccounts:o.length};{he(n.length>0,"Expected at least one writable signer key");const[p]=n[0];he(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const b=[...n.map(([p])=>new Q(p)),...e.map(([p])=>new Q(p)),...c.map(([p])=>new Q(p)),...o.map(([p])=>new Q(p))];return[f,b]}extractTableLookup(r){const[n,e]=this.drainKeysFoundInLookupTable(r.state.addresses,f=>!f.isSigner&&!f.isInvoked&&f.isWritable),[c,o]=this.drainKeysFoundInLookupTable(r.state.addresses,f=>!f.isSigner&&!f.isInvoked&&!f.isWritable);if(!(n.length===0&&c.length===0))return[{accountKey:r.key,writableIndexes:n,readonlyIndexes:c},{writable:e,readonly:o}]}drainKeysFoundInLookupTable(r,n){const e=new Array,c=new Array;for(const[o,f]of this.keyMetaMap.entries())if(n(f)){const b=new Q(o),p=r.findIndex(M=>M.equals(b));p>=0&&(he(p<256,"Max lookup table index exceeded"),e.push(p),c.push(b),this.keyMetaMap.delete(o))}return[e,c]}}const ps="Reached end of buffer unexpectedly";function me(t){if(t.length===0)throw new Error(ps);return t.shift()}function re(t,...r){const[n]=r;if(r.length===2?n+(r[1]??0)>t.length:n>=t.length)throw new Error(ps);return t.splice(...r)}class mn{constructor(r){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=r.header,this.accountKeys=r.accountKeys.map(n=>new Q(n)),this.recentBlockhash=r.recentBlockhash,this.instructions=r.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:fe.decode(r.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new yn(this.staticAccountKeys)}static compile(r){const n=Bn.compile(r.instructions,r.payerKey),[e,c]=n.getMessageComponents(),f=new yn(c).compileInstructions(r.instructions).map(b=>({programIdIndex:b.programIdIndex,accounts:b.accountKeyIndexes,data:fe.encode(b.data)}));return new mn({header:e,accountKeys:c,recentBlockhash:r.recentBlockhash,instructions:f})}isAccountSigner(r){return r<this.header.numRequiredSignatures}isAccountWritable(r){const n=this.header.numRequiredSignatures;if(r>=this.header.numRequiredSignatures){const e=r-n,o=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return e<o}else{const e=n-this.header.numReadonlySignedAccounts;return r<e}}isProgramId(r){return this.indexToProgramIds.has(r)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((r,n)=>!this.isProgramId(n))}serialize(){const r=this.accountKeys.length;let n=[];ne(n,r);const e=this.instructions.map(C=>{const{accounts:A,programIdIndex:k}=C,U=Array.from(fe.decode(C.data));let F=[];ne(F,A.length);let N=[];return ne(N,U.length),{programIdIndex:k,keyIndicesCount:nt.Buffer.from(F),keyIndices:A,dataLength:nt.Buffer.from(N),data:U}});let c=[];ne(c,e.length);let o=nt.Buffer.alloc(an);nt.Buffer.from(c).copy(o);let f=c.length;e.forEach(C=>{const k=x.struct([x.u8("programIdIndex"),x.blob(C.keyIndicesCount.length,"keyIndicesCount"),x.seq(x.u8("keyIndex"),C.keyIndices.length,"keyIndices"),x.blob(C.dataLength.length,"dataLength"),x.seq(x.u8("userdatum"),C.data.length,"data")]).encode(C,o,f);f+=k}),o=o.slice(0,f);const b=x.struct([x.blob(1,"numRequiredSignatures"),x.blob(1,"numReadonlySignedAccounts"),x.blob(1,"numReadonlyUnsignedAccounts"),x.blob(n.length,"keyCount"),x.seq(et("key"),r,"keys"),et("recentBlockhash")]),p={numRequiredSignatures:nt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.Buffer.from(n),keys:this.accountKeys.map(C=>hs(C.toBytes())),recentBlockhash:fe.decode(this.recentBlockhash)};let M=nt.Buffer.alloc(2048);const _=b.encode(p,M);return o.copy(M,_),M.slice(0,_+o.length)}static from(r){let n=[...r];const e=me(n);if(e!==(e&Or))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const c=me(n),o=me(n),f=ee(n);let b=[];for(let A=0;A<f;A++){const k=re(n,0,Ee);b.push(new Q(nt.Buffer.from(k)))}const p=re(n,0,Ee),M=ee(n);let _=[];for(let A=0;A<M;A++){const k=me(n),U=ee(n),F=re(n,0,U),N=ee(n),z=re(n,0,N),P=fe.encode(nt.Buffer.from(z));_.push({programIdIndex:k,accounts:F,data:P})}const C={header:{numRequiredSignatures:e,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:o},recentBlockhash:fe.encode(nt.Buffer.from(p)),accountKeys:b,instructions:_};return new mn(C)}}class wn{constructor(r){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=r.header,this.staticAccountKeys=r.staticAccountKeys,this.recentBlockhash=r.recentBlockhash,this.compiledInstructions=r.compiledInstructions,this.addressTableLookups=r.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let r=0;for(const n of this.addressTableLookups)r+=n.readonlyIndexes.length+n.writableIndexes.length;return r}getAccountKeys(r){let n;if(r&&"accountKeysFromLookups"in r&&r.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=r.accountKeysFromLookups.writable.length+r.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=r.accountKeysFromLookups}else if(r&&"addressLookupTableAccounts"in r&&r.addressLookupTableAccounts)n=this.resolveAddressTableLookups(r.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new yn(this.staticAccountKeys,n)}isAccountSigner(r){return r<this.header.numRequiredSignatures}isAccountWritable(r){const n=this.header.numRequiredSignatures,e=this.staticAccountKeys.length;if(r>=e){const c=r-e,o=this.addressTableLookups.reduce((f,b)=>f+b.writableIndexes.length,0);return c<o}else if(r>=this.header.numRequiredSignatures){const c=r-n,f=e-n-this.header.numReadonlyUnsignedAccounts;return c<f}else{const c=n-this.header.numReadonlySignedAccounts;return r<c}}resolveAddressTableLookups(r){const n={writable:[],readonly:[]};for(const e of this.addressTableLookups){const c=r.find(o=>o.key.equals(e.accountKey));if(!c)throw new Error(`Failed to find address lookup table account for table key ${e.accountKey.toBase58()}`);for(const o of e.writableIndexes)if(o<c.state.addresses.length)n.writable.push(c.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${e.accountKey.toBase58()}`);for(const o of e.readonlyIndexes)if(o<c.state.addresses.length)n.readonly.push(c.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${e.accountKey.toBase58()}`)}return n}static compile(r){const n=Bn.compile(r.instructions,r.payerKey),e=new Array,c={writable:new Array,readonly:new Array},o=r.addressLookupTableAccounts||[];for(const _ of o){const C=n.extractTableLookup(_);if(C!==void 0){const[A,{writable:k,readonly:U}]=C;e.push(A),c.writable.push(...k),c.readonly.push(...U)}}const[f,b]=n.getMessageComponents(),M=new yn(b,c).compileInstructions(r.instructions);return new wn({header:f,staticAccountKeys:b,recentBlockhash:r.recentBlockhash,compiledInstructions:M,addressTableLookups:e})}serialize(){const r=Array();ne(r,this.staticAccountKeys.length);const n=this.serializeInstructions(),e=Array();ne(e,this.compiledInstructions.length);const c=this.serializeAddressTableLookups(),o=Array();ne(o,this.addressTableLookups.length);const f=x.struct([x.u8("prefix"),x.struct([x.u8("numRequiredSignatures"),x.u8("numReadonlySignedAccounts"),x.u8("numReadonlyUnsignedAccounts")],"header"),x.blob(r.length,"staticAccountKeysLength"),x.seq(et(),this.staticAccountKeys.length,"staticAccountKeys"),et("recentBlockhash"),x.blob(e.length,"instructionsLength"),x.blob(n.length,"serializedInstructions"),x.blob(o.length,"addressTableLookupsLength"),x.blob(c.length,"serializedAddressTableLookups")]),b=new Uint8Array(an),M=f.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(r),staticAccountKeys:this.staticAccountKeys.map(_=>_.toBytes()),recentBlockhash:fe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(e),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:c},b);return b.slice(0,M)}serializeInstructions(){let r=0;const n=new Uint8Array(an);for(const e of this.compiledInstructions){const c=Array();ne(c,e.accountKeyIndexes.length);const o=Array();ne(o,e.data.length);const f=x.struct([x.u8("programIdIndex"),x.blob(c.length,"encodedAccountKeyIndexesLength"),x.seq(x.u8(),e.accountKeyIndexes.length,"accountKeyIndexes"),x.blob(o.length,"encodedDataLength"),x.blob(e.data.length,"data")]);r+=f.encode({programIdIndex:e.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(c),accountKeyIndexes:e.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:e.data},n,r)}return n.slice(0,r)}serializeAddressTableLookups(){let r=0;const n=new Uint8Array(an);for(const e of this.addressTableLookups){const c=Array();ne(c,e.writableIndexes.length);const o=Array();ne(o,e.readonlyIndexes.length);const f=x.struct([et("accountKey"),x.blob(c.length,"encodedWritableIndexesLength"),x.seq(x.u8(),e.writableIndexes.length,"writableIndexes"),x.blob(o.length,"encodedReadonlyIndexesLength"),x.seq(x.u8(),e.readonlyIndexes.length,"readonlyIndexes")]);r+=f.encode({accountKey:e.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(c),writableIndexes:e.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:e.readonlyIndexes},n,r)}return n.slice(0,r)}static deserialize(r){let n=[...r];const e=me(n),c=e&Or;he(e!==c,"Expected versioned message but received legacy message");const o=c;he(o===0,`Expected versioned message with version 0 but found version ${o}`);const f={numRequiredSignatures:me(n),numReadonlySignedAccounts:me(n),numReadonlyUnsignedAccounts:me(n)},b=[],p=ee(n);for(let U=0;U<p;U++)b.push(new Q(re(n,0,Ee)));const M=fe.encode(re(n,0,Ee)),_=ee(n),C=[];for(let U=0;U<_;U++){const F=me(n),N=ee(n),z=re(n,0,N),P=ee(n),D=new Uint8Array(re(n,0,P));C.push({programIdIndex:F,accountKeyIndexes:z,data:D})}const A=ee(n),k=[];for(let U=0;U<A;U++){const F=new Q(re(n,0,Ee)),N=ee(n),z=re(n,0,N),P=ee(n),D=re(n,0,P);k.push({accountKey:F,writableIndexes:z,readonlyIndexes:D})}return new wn({header:f,staticAccountKeys:b,recentBlockhash:M,compiledInstructions:C,addressTableLookups:k})}}const gs={deserializeMessageVersion(t){const r=t[0],n=r&Or;return n===r?"legacy":n},deserialize:t=>{const r=gs.deserializeMessageVersion(t);if(r==="legacy")return mn.from(t);if(r===0)return wn.deserialize(t);throw new Error(`Transaction message version ${r} deserialization is not supported`)}};nt.Buffer.alloc(wr).fill(0);class Lr{get version(){return this.message.version}constructor(r,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)he(n.length===r.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const e=[];for(let c=0;c<r.header.numRequiredSignatures;c++)e.push(new Uint8Array(wr));this.signatures=e}this.message=r}serialize(){const r=this.message.serialize(),n=Array();ne(n,this.signatures.length);const e=x.struct([x.blob(n.length,"encodedSignaturesLength"),x.seq(yu(),this.signatures.length,"signatures"),x.blob(r.length,"serializedMessage")]),c=new Uint8Array(2048),o=e.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:r},c);return c.slice(0,o)}static deserialize(r){let n=[...r];const e=[],c=ee(n);for(let f=0;f<c;f++)e.push(new Uint8Array(re(n,0,wr)));const o=gs.deserialize(new Uint8Array(n));return new Lr(o,e)}sign(r){const n=this.message.serialize(),e=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const c of r){const o=e.findIndex(f=>f.equals(c.publicKey));he(o>=0,`Cannot sign with non signer key ${c.publicKey.toBase58()}`),this.signatures[o]=hu(n,c.secretKey)}}addSignature(r,n){he(n.byteLength===64,"Signature must be 64 bytes long");const c=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(r));he(c>=0,`Can not add signature; \`${r.toBase58()}\` is not required to sign this transaction`),this.signatures[c]=n}}new Q("SysvarC1ock11111111111111111111111111111111");new Q("SysvarEpochSchedu1e111111111111111111111111");new Q("Sysvar1nstructions1111111111111111111111111");new Q("SysvarRecentB1ockHashes11111111111111111111");new Q("SysvarRent111111111111111111111111111111111");new Q("SysvarRewards111111111111111111111111111111");new Q("SysvarS1otHashes111111111111111111111111111");new Q("SysvarS1otHistory11111111111111111111111111");new Q("SysvarStakeHistory1111111111111111111111111");const xu=x.nu64("lamportsPerSignature"),Eu=x.struct([x.u32("version"),x.u32("state"),et("authorizedPubkey"),et("nonce"),x.struct([xu],"feeCalculator")]);Eu.span;function Ke(t){const r=x.blob(8,t),n=r.decode.bind(r),e=r.encode.bind(r),c=r,o=Da();return c.decode=(f,b)=>{const p=n(f,b);return o.decode(p)},c.encode=(f,b,p)=>{const M=o.encode(f);return e(M,b,p)},c}Object.freeze({Create:{index:0,layout:x.struct([x.u32("instruction"),x.ns64("lamports"),x.ns64("space"),et("programId")])},Assign:{index:1,layout:x.struct([x.u32("instruction"),et("programId")])},Transfer:{index:2,layout:x.struct([x.u32("instruction"),Ke("lamports")])},CreateWithSeed:{index:3,layout:x.struct([x.u32("instruction"),et("base"),Ce("seed"),x.ns64("lamports"),x.ns64("space"),et("programId")])},AdvanceNonceAccount:{index:4,layout:x.struct([x.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:x.struct([x.u32("instruction"),et("authorized")])},AuthorizeNonceAccount:{index:7,layout:x.struct([x.u32("instruction"),et("authorized")])},Allocate:{index:8,layout:x.struct([x.u32("instruction"),x.ns64("space")])},AllocateWithSeed:{index:9,layout:x.struct([x.u32("instruction"),et("base"),Ce("seed"),x.ns64("space"),et("programId")])},AssignWithSeed:{index:10,layout:x.struct([x.u32("instruction"),et("base"),Ce("seed"),et("programId")])},TransferWithSeed:{index:11,layout:x.struct([x.u32("instruction"),Ke("lamports"),Ce("seed"),et("programId")])},UpgradeNonceAccount:{index:12,layout:x.struct([x.u32("instruction")])}});new Q("11111111111111111111111111111111");new Q("BPFLoader2111111111111111111111111111111111");x.struct([x.u32("typeIndex"),Ke("deactivationSlot"),x.nu64("lastExtendedSlot"),x.u8("lastExtendedStartIndex"),x.u8(),x.seq(et(),x.offset(x.u8(),-1),"authority")]);const lt=tn(kr(Q),Z(),t=>new Q(t)),ys=Rr([Z(),ut("base64")]),Ur=tn(kr(nt.Buffer),ys,t=>nt.Buffer.from(t[0],"base64"));function ms(t){return Qt([K({jsonrpc:ut("2.0"),id:Z(),result:t}),K({jsonrpc:ut("2.0"),id:Z(),error:K({code:Pe(),message:Z(),data:X(Ya())})})])}const Mu=ms(Pe());function ot(t){return tn(ms(t),Mu,r=>"error"in r?r:{...r,result:Ge(r.result,t)})}function ae(t){return ot(K({context:K({slot:R()}),value:t}))}function An(t){return K({context:K({slot:R()}),value:t})}const Su=K({foundation:R(),foundationTerm:R(),initial:R(),taper:R(),terminal:R()});ot($(j(K({epoch:R(),effectiveSlot:R(),amount:R(),postBalance:R(),commission:X(j(R()))}))));const Bu=$(K({slot:R(),prioritizationFee:R()})),Au=K({total:R(),validator:R(),foundation:R(),epoch:R()}),Iu=K({epoch:R(),slotIndex:R(),slotsInEpoch:R(),absoluteSlot:R(),blockHeight:X(R()),transactionCount:X(R())}),_u=K({slotsPerEpoch:R(),leaderScheduleSlotOffset:R(),warmup:de(),firstNormalEpoch:R(),firstNormalSlot:R()}),ku=as(Z(),$(R())),Re=j(Qt([K({}),Z()])),Ru=K({err:Re}),Tu=ut("receivedSignature");K({"solana-core":Z(),"feature-set":X(R())});const Ou=K({program:Z(),programId:lt,parsed:Pe()}),Lu=K({programId:lt,accounts:$(lt),data:Z()});ae(K({err:j(Qt([K({}),Z()])),logs:j($(Z())),accounts:X(j($(j(K({executable:de(),owner:Z(),lamports:R(),data:$(Z()),rentEpoch:X(R())}))))),unitsConsumed:X(R()),returnData:X(j(K({programId:Z(),data:Rr([Z(),ut("base64")])}))),innerInstructions:X(j($(K({index:R(),instructions:$(Qt([Ou,Lu]))}))))}));ae(K({byIdentity:as(Z(),$(R())),range:K({firstSlot:R(),lastSlot:R()})}));ot(Su);ot(Au);ot(Bu);ot(Iu);ot(_u);ot(ku);ot(R());ae(K({total:R(),circulating:R(),nonCirculating:R(),nonCirculatingAccounts:$(lt)}));const Uu=K({amount:Z(),uiAmount:j(R()),decimals:R(),uiAmountString:X(Z())});ae($(K({address:lt,amount:Z(),uiAmount:j(R()),decimals:R(),uiAmountString:X(Z())})));ae($(K({pubkey:lt,account:K({executable:de(),owner:lt,lamports:R(),data:Ur,rentEpoch:R()})})));const vr=K({program:Z(),parsed:Pe(),space:R()});ae($(K({pubkey:lt,account:K({executable:de(),owner:lt,lamports:R(),data:vr,rentEpoch:R()})})));ae($(K({lamports:R(),address:lt})));const Cr=K({executable:de(),owner:lt,lamports:R(),data:Ur,rentEpoch:R()});K({pubkey:lt,account:Cr});const Cu=tn(Qt([kr(nt.Buffer),vr]),Qt([ys,vr]),t=>Array.isArray(t)?Ge(t,Ur):t),Nu=K({executable:de(),owner:lt,lamports:R(),data:Cu,rentEpoch:R()});K({pubkey:lt,account:Nu});K({state:Qt([ut("active"),ut("inactive"),ut("activating"),ut("deactivating")]),active:R(),inactive:R()});ot($(K({signature:Z(),slot:R(),err:Re,memo:j(Z()),blockTime:X(j(R()))})));ot($(K({signature:Z(),slot:R(),err:Re,memo:j(Z()),blockTime:X(j(R()))})));K({subscription:R(),result:An(Cr)});const qu=K({pubkey:lt,account:Cr});K({subscription:R(),result:An(qu)});const zu=K({parent:R(),slot:R(),root:R()});K({subscription:R(),result:zu});const Fu=Qt([K({type:Qt([ut("firstShredReceived"),ut("completed"),ut("optimisticConfirmation"),ut("root")]),slot:R(),timestamp:R()}),K({type:ut("createdBank"),parent:R(),slot:R(),timestamp:R()}),K({type:ut("frozen"),slot:R(),timestamp:R(),stats:K({numTransactionEntries:R(),numSuccessfulTransactions:R(),numFailedTransactions:R(),maxTransactionsPerEntry:R()})}),K({type:ut("dead"),slot:R(),timestamp:R(),err:Z()})]);K({subscription:R(),result:Fu});K({subscription:R(),result:An(Qt([Ru,Tu]))});K({subscription:R(),result:R()});K({pubkey:Z(),gossip:j(Z()),tpu:j(Z()),rpc:j(Z()),version:j(Z())});const Ii=K({votePubkey:Z(),nodePubkey:Z(),activatedStake:R(),epochVoteAccount:de(),epochCredits:$(Rr([R(),R(),R()])),commission:R(),lastVote:R(),rootSlot:j(R())});ot(K({current:$(Ii),delinquent:$(Ii)}));const Du=Qt([ut("processed"),ut("confirmed"),ut("finalized")]),Ku=K({slot:R(),confirmations:j(R()),err:Re,confirmationStatus:X(Du)});ae($(j(Ku)));ot(R());const ws=K({accountKey:lt,writableIndexes:$(R()),readonlyIndexes:$(R())}),Nr=K({signatures:$(Z()),message:K({accountKeys:$(Z()),header:K({numRequiredSignatures:R(),numReadonlySignedAccounts:R(),numReadonlyUnsignedAccounts:R()}),instructions:$(K({accounts:$(R()),data:Z(),programIdIndex:R()})),recentBlockhash:Z(),addressTableLookups:X($(ws))})}),vs=K({pubkey:lt,signer:de(),writable:de(),source:X(Qt([ut("transaction"),ut("lookupTable")]))}),bs=K({accountKeys:$(vs),signatures:$(Z())}),xs=K({parsed:Pe(),program:Z(),programId:lt}),Es=K({accounts:$(lt),data:Z(),programId:lt}),Pu=Qt([Es,xs]),Zu=Qt([K({parsed:Pe(),program:Z(),programId:Z()}),K({accounts:$(Z()),data:Z(),programId:Z()})]),Ms=tn(Pu,Zu,t=>"accounts"in t?Ge(t,Es):Ge(t,xs)),Ss=K({signatures:$(Z()),message:K({accountKeys:$(vs),instructions:$(Ms),recentBlockhash:Z(),addressTableLookups:X(j($(ws)))})}),vn=K({accountIndex:R(),mint:Z(),owner:X(Z()),programId:X(Z()),uiTokenAmount:Uu}),Bs=K({writable:$(lt),readonly:$(lt)}),In=K({err:Re,fee:R(),innerInstructions:X(j($(K({index:R(),instructions:$(K({accounts:$(R()),data:Z(),programIdIndex:R()}))})))),preBalances:$(R()),postBalances:$(R()),logMessages:X(j($(Z()))),preTokenBalances:X(j($(vn))),postTokenBalances:X(j($(vn))),loadedAddresses:X(Bs),computeUnitsConsumed:X(R()),costUnits:X(R())}),qr=K({err:Re,fee:R(),innerInstructions:X(j($(K({index:R(),instructions:$(Ms)})))),preBalances:$(R()),postBalances:$(R()),logMessages:X(j($(Z()))),preTokenBalances:X(j($(vn))),postTokenBalances:X(j($(vn))),loadedAddresses:X(Bs),computeUnitsConsumed:X(R()),costUnits:X(R())}),Ze=Qt([ut(0),ut("legacy")]),Te=K({pubkey:Z(),lamports:R(),postBalance:j(R()),rewardType:j(Z()),commission:X(j(R()))});ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(K({transaction:Nr,meta:j(In),version:X(Ze)})),rewards:X($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),rewards:X($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(K({transaction:bs,meta:j(In),version:X(Ze)})),rewards:X($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(K({transaction:Ss,meta:j(qr),version:X(Ze)})),rewards:X($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(K({transaction:bs,meta:j(qr),version:X(Ze)})),rewards:X($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),rewards:X($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(K({transaction:Nr,meta:j(In)})),rewards:X($(Te)),blockTime:j(R())})));ot(j(K({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),signatures:$(Z()),blockTime:j(R())})));ot(j(K({slot:R(),meta:j(In),blockTime:X(j(R())),transaction:Nr,version:X(Ze)})));ot(j(K({slot:R(),transaction:Ss,meta:j(qr),blockTime:X(j(R())),version:X(Ze)})));ae(K({blockhash:Z(),lastValidBlockHeight:R()}));ae(de());const Vu=K({slot:R(),numTransactions:R(),numSlots:R(),samplePeriodSecs:R()});ot($(Vu));ae(j(K({feeCalculator:K({lamportsPerSignature:R()})})));ot(Z());ot(Z());const $u=K({err:Re,logs:$(Z()),signature:Z()});K({result:An($u),subscription:R()});Object.freeze({CreateLookupTable:{index:0,layout:x.struct([x.u32("instruction"),Ke("recentSlot"),x.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:x.struct([x.u32("instruction")])},ExtendLookupTable:{index:2,layout:x.struct([x.u32("instruction"),Ke(),x.seq(et(),x.offset(x.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:x.struct([x.u32("instruction")])},CloseLookupTable:{index:4,layout:x.struct([x.u32("instruction")])}});new Q("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:x.struct([x.u8("instruction"),x.u32("units"),x.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:x.struct([x.u8("instruction"),x.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:x.struct([x.u8("instruction"),x.u32("units")])},SetComputeUnitPrice:{index:3,layout:x.struct([x.u8("instruction"),Ke("microLamports")])}});new Q("ComputeBudget111111111111111111111111111111");x.struct([x.u8("numSignatures"),x.u8("padding"),x.u16("signatureOffset"),x.u16("signatureInstructionIndex"),x.u16("publicKeyOffset"),x.u16("publicKeyInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u16("messageInstructionIndex")]);new Q("Ed25519SigVerify111111111111111111111111111");lu.utils.isValidPrivateKey;x.struct([x.u8("numSignatures"),x.u16("signatureOffset"),x.u8("signatureInstructionIndex"),x.u16("ethAddressOffset"),x.u8("ethAddressInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u8("messageInstructionIndex"),x.blob(20,"ethAddress"),x.blob(64,"signature"),x.u8("recoveryId")]);new Q("KeccakSecp256k11111111111111111111111111111");var As;new Q("StakeConfig11111111111111111111111111111111");class Is{constructor(r,n,e){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=r,this.epoch=n,this.custodian=e}}As=Is;Is.default=new As(0,0,Q.default);Object.freeze({Initialize:{index:0,layout:x.struct([x.u32("instruction"),mu(),wu()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),et("newAuthorized"),x.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:x.struct([x.u32("instruction")])},Split:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Withdraw:{index:4,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Deactivate:{index:5,layout:x.struct([x.u32("instruction")])},Merge:{index:7,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:x.struct([x.u32("instruction"),et("newAuthorized"),x.u32("stakeAuthorizationType"),Ce("authoritySeed"),et("authorityOwner")])}});new Q("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:x.struct([x.u32("instruction"),vu()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),et("newAuthorized"),x.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:x.struct([x.u32("instruction"),bu()])}});new Q("Vote111111111111111111111111111111111111111");new Q("Va1idator1nfo111111111111111111111111111111");K({name:Z(),website:X(Z()),details:X(Z()),iconUrl:X(Z()),keybaseUsername:X(Z())});new Q("Vote111111111111111111111111111111111111111");x.struct([et("nodePubkey"),et("authorizedWithdrawer"),x.u8("commission"),x.nu64(),x.seq(x.struct([x.nu64("slot"),x.u32("confirmationCount")]),x.offset(x.u32(),-8),"votes"),x.u8("rootSlotValid"),x.nu64("rootSlot"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),et("authorizedVoter")]),x.offset(x.u32(),-8),"authorizedVoters"),x.struct([x.seq(x.struct([et("authorizedPubkey"),x.nu64("epochOfLastAuthorizedSwitch"),x.nu64("targetEpoch")]),32,"buf"),x.nu64("idx"),x.u8("isEmpty")],"priorVoters"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),x.nu64("credits"),x.nu64("prevCredits")]),x.offset(x.u32(),-8),"epochCredits"),x.struct([x.nu64("slot"),x.nu64("timestamp")],"lastTimestamp")]);class ju extends js{constructor({config:r,state:n}){super({config:r,state:n})}async switchChain(r){throw ue.unsupportedOperation("Chain switching is not supported by this connector")}async setupProvider(r,n){const e=new Ys,c=this.getChain(n),o=this.getProviderHandlers(r),f=ro(o);e.push(f);const b=io(c);e.push(b);const p=this.getInjectedProviderProxy(r);p&&e.push(p);const M=Gs(e);this.updateProviderEngineProxy(M),await this.lookupNetwork(r,n)}async lookupNetwork(r,n){return this.update({chainId:n}),n||""}getInjectedProviderProxy(r){}}const Yu=t=>({requestAccounts:async()=>t.publicKey?[Ne.encode(t.publicKey.toBytes())]:[],getPublicKey:async()=>t.publicKey?Ne.encode(t.publicKey.toBytes()):"",getAccounts:async()=>t.publicKey?[Ne.encode(t.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Hn.methodNotSupported()},getSecretKey:async()=>{throw Hn.methodNotSupported()},signTransaction:async n=>await t.signTransaction(n.params.message),signMessage:async n=>await t.signMessage(n.params.data,n.params.from,n.params.display),signAllTransactions:async n=>{var e,c;if(!((e=n.params)!==null&&e!==void 0&&e.message)||!((c=n.params)!==null&&c!==void 0&&c.message.length))throw Hn.invalidParams("message");return await t.signAllTransactions(n.params.message)},signAndSendTransaction:async n=>await t.signAndSendTransaction(n.params.message)}),_s=t=>{switch(t.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class Gu extends ju{getProviderHandlers(r){const n=_s(this.config.chain),e=()=>{const p=r==null?void 0:r.accounts[0];if(!p)throw ue.notConnectedError();return p};return Yu({get publicKey(){return new Q(e().publicKey)},signMessage:async p=>{const M=e(),_=new Uint8Array(Buffer.from(p,"utf-8")),C=await r.features[Ci].signMessage({account:M,message:_});return Ne.encode(C[0].signature)},signTransaction:async p=>{const M=e(),_=await r.features[dr].signTransaction({account:M,transaction:new Uint8Array(Buffer.from(p,"base64")),chain:n});return Ne.encode(Lr.deserialize(_[0].signedTransaction).signatures[0])},signAllTransactions:async p=>{const M=e();return Promise.all(p.map(async _=>{const C=await r.features[dr].signTransaction({account:M,transaction:new Uint8Array(Buffer.from(_,"base64")),chain:n});return Buffer.from(C[0].signedTransaction).toString("base64")}))},signAndSendTransaction:async p=>{const M=e(),_=await r.features[Ui].signAndSendTransaction({account:M,transaction:new Uint8Array(Buffer.from(p,"base64")),chain:n});return Ne.encode(_[0].signature)}})}}class Hu extends So{constructor(r){super(r),ve(this,"name",void 0),ve(this,"connectorNamespace",Ws.SOLANA),ve(this,"currentChainNamespace",Xs.SOLANA),ve(this,"type",Js.EXTERNAL),ve(this,"isInjected",!0),ve(this,"status",ie.NOT_READY),ve(this,"wallet",null),ve(this,"injectedProvider",null),this.name=r.name,this.icon=r.wallet.icon,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(r.wallet):r.wallet}get provider(){return this.status!==ie.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return!!(this.connected&&this.wallet.accounts.length>0)}async init(r){await super.init(r);const n=this.coreOptions.chains.find(e=>e.chainId===r.chainId);super.checkInitializationRequirements({chainConfig:n}),this.injectedProvider=new Gu({config:{chain:n,chains:this.coreOptions.chains}}),await this.injectedProvider.setupProvider(this.wallet,r.chainId),this.status=ie.READY,this.emit(ce.READY,this.name);try{if(Qs.debug("initializing solana injected connector"),r.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:r.chainId,getIdentityToken:r.getIdentityToken})))throw this.rehydrated=!1,ue.connectionError("Failed to rehydrate.")}catch(e){this.emit(ce.REHYDRATION_ERROR,e)}}async connect({chainId:r,getIdentityToken:n}){try{super.checkConnectionRequirements();const e=this.coreOptions.chains.find(f=>f.chainId===r);if(!e)throw ue.connectionError("Chain config is not available");this.status=ie.CONNECTING,this.emit(ce.CONNECTING,{connector:this.name});const c=_s(e);if(!this.wallet.chains.find(f=>f===c))throw ue.connectionError(`Chain ${c} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[Ni].connect(),this.wallet.accounts.length===0)throw ue.connectionError();this.status=ie.CONNECTED;let o;return this.emit(ce.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.provider,identityTokenInfo:o}),n&&(o=await this.getIdentityToken()),this.provider}catch(e){throw this.status=ie.READY,this.rehydrated||this.emit(ce.ERRORED,e),this.rehydrated=!1,e}}async disconnect(r={cleanup:!1}){await super.disconnectSession();try{var n;await((n=this.wallet.features[Oo])===null||n===void 0?void 0:n.disconnect()),r.cleanup?(this.status=ie.NOT_READY,this.injectedProvider=null):this.status=ie.READY,await super.disconnect()}catch(e){this.emit(ce.ERRORED,ue.disconnectionError(e==null?void 0:e.message))}}async getUserInfo(){if(!this.canAuthorize)throw ue.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(r,n=!1){var e;super.checkSwitchChainRequirements(r,n),await((e=this.injectedProvider)===null||e===void 0?void 0:e.switchChain(r))}async enableMFA(){throw new Error("Method not implemented.")}async manageMFA(){throw new Error("Method Not implemented")}}const ic=t=>({coreOptions:r})=>new Hu({name:Hs(t.name),wallet:t,coreOptions:r}),sc=t=>{const{chains:r,features:n}=t;return r.some(o=>o.startsWith("solana"))?!![Ni,Ci,dr,Ui].every(o=>Object.keys(n).includes(o)):void 0};export{ec as createSolanaMipd,sc as hasSolanaWalletStandardFeatures,ic as walletStandardConnector};
