import{w as N,x as b,a as _,S as g}from"./index-B53wgWLC.js";const C=t=>{if(t.length>=255)throw new TypeError("Alphabet too long");const r=new Uint8Array(256);for(let e=0;e<r.length;e++)r[e]=255;for(let e=0;e<t.length;e++){const i=t.charAt(e),d=i.charCodeAt(0);if(r[d]!==255)throw new TypeError(`${i} is ambiguous`);r[d]=e}const n=t.length,a=t.charAt(0),c=Math.log(n)/Math.log(256),h=Math.log(256)/Math.log(n);function E(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length===0)return"";let i=0,d=0,l=0;const f=e.length;for(;l!==f&&e[l]===0;)l++,i++;const w=(f-l)*h+1>>>0,s=new Uint8Array(w);for(;l!==f;){let o=e[l],S=0;for(let u=w-1;(o!==0||S<d)&&u!==-1;u--,S++)o+=256*s[u]>>>0,s[u]=o%n>>>0,o=o/n>>>0;if(o!==0)throw new Error("Non-zero carry");d=S,l++}let A=w-d;for(;A!==w&&s[A]===0;)A++;let p=a.repeat(i);for(;A<w;++A)p+=t.charAt(s[A]);return p}function M(e){if(typeof e!="string")throw new TypeError("Expected String");if(e.length===0)return new Uint8Array;let i=0,d=0,l=0;for(;e[i]===a;)d++,i++;const f=(e.length-i)*c+1>>>0,w=new Uint8Array(f);for(;e[i];){let o=r[e.charCodeAt(i)];if(o===255)return;let S=0;for(let u=f-1;(o!==0||S<l)&&u!==-1;u--,S++)o+=n*w[u]>>>0,w[u]=o%256>>>0,o=o/256>>>0;if(o!==0)throw new Error("Non-zero carry");l=S,i++}let s=f-l;for(;s!==f&&w[s]===0;)s++;const A=new Uint8Array(d+(f-s));let p=d;for(;s!==f;)A[p++]=w[s++];return A}function T(e){const i=M(e);if(i)return i;throw new Error(`Non-base${n} character`)}return{encode:E,decodeUnsafe:M,decode:T}},U="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",K=C(U);function R(t){return(r,n,a,c)=>r.method==="solana_chainId"?(n.result=t,c()):a()}function O(t){return(r,n,a,c)=>r.method==="solana_provider_config"?(n.result=t,c()):a()}function m(t){const{chainId:r}=t;return N([R(r),O(t)])}function x(t){const{rpcTarget:r}=t,n=b({rpcTarget:r});return{networkMiddleware:N([m(t),n]),fetchMiddleware:n}}function I({getAccounts:t}){return _(async(r,n,a)=>{const{method:c}=r;if(c!==g.GET_ACCOUNTS)return a();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const h=await t(r);n.result=h})}function z({requestAccounts:t}){return _(async(r,n,a)=>{const{method:c}=r;if(c!==g.SOLANA_REQUEST_ACCOUNTS)return a();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const h=await t(r);n.result=h})}function y(t,r){return _(async(n,a,c)=>{const{method:h}=n;if(h!==t)return c();if(!r)throw new Error(`WalletMiddleware - ${t} not provided`);const E=await r(n);a.result=E})}function v(t){const{getAccounts:r,requestAccounts:n,signTransaction:a,signAndSendTransaction:c,signAllTransactions:h,signMessage:E,getPrivateKey:M,getSecretKey:T,getPublicKey:e}=t;return N([z({requestAccounts:n}),I({getAccounts:r}),y(g.SIGN_TRANSACTION,a),y(g.SEND_TRANSACTION,c),y(g.SIGN_ALL_TRANSACTIONS,h),y(g.SIGN_MESSAGE,E),y(g.SOLANA_PRIVATE_KEY,M),y(g.PRIVATE_KEY,M),y("public_key",e),y("solanaPublicKey",e),y("solanaSecretKey",T)])}export{m as a,K as b,v as c,x as d};
